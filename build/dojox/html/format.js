//>>built
define("dojox/html/format",["dojo/_base/kernel","./entities","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(h,y,D,E,z){var p=h.getObject("dojox.html.format",!0);p.prettyPrint=function(p,m,n,A,F){var g=[],k=0,v=[],l="\t",e="",B=[],w,G=/[=]([^"']+?)(\s|>)/g,H=/style=("[^"]*"|'[^']*'|\S*)/gi,I=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(m&&0<m&&10>m)for(l="",w=0;w<m;w++)l+=" ";m=E.doc.createElement("div");m.innerHTML=p;var J=y.encode,K=y.decode,x=m.ownerDocument.createElement("div"),L=function(a){a=
a.cloneNode(!1);x.appendChild(a);a=x.innerHTML;x.innerHTML="";return a},q=function(){var a;for(a=0;a<k;a++)g.push(l)},r=function(){g.push("\n")},t=function(a){var b,d;a=a.split("\n");for(b=0;b<a.length;b++)a[b]=h.trim(a[b]);a=a.join(" ");a=h.trim(a);if(""!==a){var c=[];if(n&&0<n){var f="";for(b=0;b<k;b++)f+=l;b=f.length;f=n;for(n>b&&(f-=b);a;)if(a.length>n){for(b=f;0<b&&" "!==a.charAt(b);b--);if(!b)for(b=f;b<a.length&&" "!==a.charAt(b);b++);var e=a.substring(0,b),e=h.trim(e);a=h.trim(a.substring(b==
a.length?a.length:b+1,a.length));if(e){d="";for(b=0;b<k;b++)d+=l;e=d+e+"\n"}c.push(e)}else{d="";for(b=0;b<k;b++)d+=l;a=d+a+"\n";c.push(a);a=null}return c.join("")}d="";for(b=0;b<k;b++)d+=l;return d+a+"\n"}return""},M=function(a){if(a){var b=a;b&&(b=b.replace(/&quot;/gi,'"'),b=b.replace(/&gt;/gi,"\x3e"),b=b.replace(/&lt;/gi,"\x3c"),b=b.replace(/&amp;/gi,"\x26"));var d,c;a=0;for(var f=b.split("\n"),e=[],b=0;b<f.length;b++){var g=f[b],u=-1<g.indexOf("\n");if(g=h.trim(g)){u=a;for(d=0;d<g.length;d++)c=
g.charAt(d),"{"===c?a++:"}"===c&&(a--,u=a);c="";for(d=0;d<k+u;d++)c+=l;e.push(c+g+"\n")}else u&&0===b&&e.push("\n")}a=e.join("")}return a},N=function(a){var b=a.nodeName.toLowerCase(),d=h.trim(L(a));a=d.substring(0,d.indexOf("\x3e")+1);a=a.replace(G,'\x3d"$1"$2');a=a.replace(H,function(a){var b=a.substring(0,6);a=a.substring(6,a.length);var c=a.charAt(0);a=h.trim(a.substring(1,a.length-1));a=a.split(";");var d=[];D.forEach(a,function(a){if(a=h.trim(a))a=a.substring(0,a.indexOf(":")).toLowerCase()+
a.substring(a.indexOf(":"),a.length),d.push(a)});d=d.sort();a=d.join("; ");var e=h.trim(a);return e&&";"!==e?b+c+(a+";")+c:""});var c=[];a=a.replace(I,function(a){c.push(h.trim(a));return""});c=c.sort();a="\x3c"+b;c.length&&(a+=" "+c.join(" "));-1!=d.indexOf("\x3c/")?(v.push(b),a+="\x3e"):(a=F?a+" /\x3e":a+"\x3e",v.push(!1));a:switch(b){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":b=
!0;break a;default:b=!1}B.push(b);e&&!b&&(g.push(t(e)),e="");b?e+=a:(q(),g.push(a),r(),k++)},C=function(a){var b=a.childNodes;if(b){var d;for(d=0;d<b.length;d++){var c=b[d];if(1===c.nodeType){var f=h.trim(c.tagName.toLowerCase());z("ie")&&c.parentNode!=a||f&&"/"===f.charAt(0)||(N(c),"script"===f?g.push(M(c.innerHTML)):"pre"===f?(c=c.innerHTML,z("mozilla")&&(c=c.replace("\x3cbr\x3e","\n"),c=c.replace("\x3cpre\x3e",""),c=c.replace("\x3c/pre\x3e","")),"\n"!==c.charAt(c.length-1)&&(c+="\n"),g.push(c)):
C(c),c=B.pop(),e&&!c&&(g.push(t(e)),e=""),(f=v.pop())?(f="\x3c/"+f+"\x3e",c?e+=f:(k--,q(),g.push(f),r())):k--)}else 3===c.nodeType||4===c.nodeType?e+=J(c.nodeValue,A):8===c.nodeType&&(c=K(c.nodeValue,A),q(),g.push("\x3c!--"),r(),k++,g.push(t(c)),k--,q(),g.push("--\x3e"),r())}}};C(m);e&&(g.push(t(e)),e="");return g.join("")};return p});