//>>built
define("esri/tasks/DirectionsFeatureSet","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ../kernel ../geometry/Extent ../geometry/Polyline ./FeatureSet".split(" "),function(e,n,l,y,z,A,q,B){e=e(B,{declaredClass:"esri.tasks.DirectionsFeatureSet",constructor:function(f,p){this.routeId=f.routeId;this.routeName=f.routeName;n.mixin(this,f.summary);this.extent=new A(this.envelope);var a=this._fromCompressedGeometry,g=this.features,c=this.extent.spatialReference,m=[];l.forEach(p,function(b,
f){g[f].setGeometry(m[f]=a(b,c))});this.strings=f.strings;this.mergedGeometry=this._mergePolylinesToSinglePath(m,c);this.geometryType="esriGeometryPolyline";delete this.envelope},_fromCompressedGeometry:function(f,p){var a,g,c,m,b,e,n,r,t=0,u=0,v=0,w=0,x=[],d=0,h=0,k=0;(b=f.match(/((\+|\-)[^\+\-\|]+|\|)/g),b||(b=[]),0===parseInt(b[d],32))?(d=2,a=parseInt(b[d],32),d++,e=parseInt(b[d],32),d++,1&a&&(h=l.indexOf(b,"|")+1,n=parseInt(b[h],32),h++),2&a&&(k=l.indexOf(b,"|",h)+1,r=parseInt(b[k],32),k++)):
(e=parseInt(b[d],32),d++);for(;d<b.length&&"|"!==b[d];)a=parseInt(b[d],32)+t,d++,t=a,g=parseInt(b[d],32)+u,d++,u=g,a=[a/e,g/e],h&&(m=parseInt(b[h],32)+v,h++,v=m,a.push(m/n)),k&&(c=parseInt(b[k],32)+w,k++,w=c,a.push(c/r)),x.push(a);c=new q({paths:[x],hasZ:0<h,hasM:0<k});return c.setSpatialReference(p),c},_mergePolylinesToSinglePath:function(f,e){var a=[];l.forEach(f,function(c){l.forEach(c.paths,function(b){a=a.concat(b)})});var g=[],c=[0,0];return l.forEach(a,function(a){(a[0]!==c[0]||a[1]!==c[1])&&
(g.push(a),c=a)}),(new q({paths:[g]})).setSpatialReference(e)}});return y("extend-esri")&&n.setObject("tasks.DirectionsFeatureSet",e,z),e});