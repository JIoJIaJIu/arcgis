//>>built
define("esri/tasks/Task","dojo/_base/declare dojo/_base/lang dojo/_base/json dojo/has ../kernel ../deferredUtils ../urlUtils ../Evented".split(" "),function(b,h,m,n,p,q,r,t){b=b(t,{declaredClass:"esri.tasks._Task",_eventMap:{error:["error"],complete:["result"]},constructor:function(a,c){a&&h.isString(a)&&(this._url=r.urlToObject(this.url=a));c&&c.requestOptions&&(this.requestOptions=c.requestOptions);this.normalization=!0;this._errorHandler=h.hitch(this,this._errorHandler);this.registerConnectEvents()},
_useSSL:function(){var a=this._url,c=/^http:/i;this.url&&(this.url=this.url.replace(c,"https:"));a&&a.path&&(a.path=a.path.replace(c,"https:"))},_encode:function(a,c,k){var d,b,f,e,l,g={};for(f in a)if("declaredClass"!==f&&(d=a[f],b=typeof d,null!==d&&void 0!==d&&"function"!==b))if(h.isArray(d))for(g[f]=[],l=d.length,e=0;l>e;e++)g[f][e]=this._encode(d[e]);else"object"===b?d.toJson&&(e=d.toJson(k&&k[f]),"esri.tasks.FeatureSet"===d.declaredClass&&e.spatialReference&&(e.sr=e.spatialReference,delete e.spatialReference),
g[f]=c?e:m.toJson(e)):g[f]=d;return g},_successHandler:function(a,c,b,d){c&&this[c].apply(this,a);b&&b.apply(null,a);d&&q._resDfd(d,a)},_errorHandler:function(a,c,b){this.onError(a);c&&c(a);b&&b.errback(a)},setNormalization:function(a){this.normalization=a},onError:function(){}});return n("extend-esri")&&(p.Task=b),b});