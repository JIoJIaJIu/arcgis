//>>built
define("esri/tasks/datareviewer/DashboardTask","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/Deferred dojo/has ./_DRSBaseTask ./DashboardResult ./ReviewerFilters ../../kernel ../../request".split(" "),function(b,l,c,m,p,q,r,t,u,n){b=b(q,{declaredClass:"esri.tasks.datareviewer.DashboardTask",constructor:function(){this.onGetDashboardResultsComplete=c.hitch(this,this.onGetDashboardResultsComplete);this.onGetDashboardFieldNamesComplete=c.hitch(this,this.onGetDashboardFieldNamesComplete)},
getDashboardResults:function(b,d){var h,a,g=this._successHandler,k=this._errorHandler,v=this._appendQueryParams,e=new m;null===d||void 0===d?(a=this._url+"/Dashboard/reviewerResultsBy/"+b,h={f:"json"}):(a=this._url+"/Dashboard/reviewerResultsBy/"+b+"/filter",h={f:"json",filtersArray:d.toJSON()});a=v(a);return n({callbackParamName:"callback",url:a,content:h}).then(c.hitch(this,function(f){if(void 0!==f.error){var a=Error();return a.message=f.error.message,a.code=f.error.code,void k(a,e)}try{if(void 0===
f.dashboardResults)k(null,e);else{var b=new r;l.forEach(f.dashboardResults,function(a){b.fieldValues.push(a.fieldValue);b.counts.push(a.count)});b.fieldName=f.fieldName;a=new t;a.createFromJsonObject(f);b.filters=a;g({dashboardResult:b},"onGetDashboardResultsComplete",e)}}catch(d){k(d,e)}}),function(a){k(a,e)}),e},getDashboardFieldNames:function(){var b=this._successHandler,d=this._errorHandler,h=this._appendQueryParams,a=this._url+"/Dashboard",a=h(a),g=new m;return n({callbackParamName:"callback",
url:a,content:{f:"json"}}).then(c.hitch(this,function(a){if(void 0!==a.error){var c=Error();return c.message=a.error.message,c.code=a.error.code,void d(c,g)}try{var e=[];l.forEach(a.reviewerResultsBy,function(a){e.push(a.name)});b({fieldNames:e},"onGetDashboardFieldNamesComplete",g)}catch(f){d(f,g)}}),function(a){d(a,g)}),g},onGetDashboardResultsComplete:function(){},onGetDashboardFieldNamesComplete:function(){}});return p("extend-esri")&&c.setObject("tasks.datareviewer.DashboardTask",b,u),b});