//>>built
define("esri/graphic","dojo/_base/declare dojo/_base/lang dojo/has ./kernel ./domUtils ./lang ./InfoTemplate ./geometry/jsonUtils ./symbols/jsonUtils".split(" "),function(d,e,k,l,g,h,m,n,p){d=d(null,{declaredClass:"esri.Graphic",constructor:function(a,b,c,f){a&&!a.declaredClass?(this.geometry=a.geometry?n.fromJson(a.geometry):null,this.symbol=a.symbol?p.fromJson(a.symbol):null,this.attributes=a.attributes||null,this.infoTemplate=a.infoTemplate?new m(a.infoTemplate):null):(this.geometry=a,this.symbol=
b,this.attributes=c,this.infoTemplate=f)},_shape:null,_graphicsLayer:null,_visible:!0,visible:!0,getDojoShape:function(){return this._shape},getShapes:function(){var a=[];return this._shape&&a.push(this._shape),this._bgShape&&a.push(this._bgShape),a},getNode:function(){var a=this._shape&&this._shape.getNode();return a&&a.nodeType?a:null},getNodes:function(){var a,b,c=this.getShapes(),f=c.length,d=[];for(b=0;f>b;b++)(a=c[b]&&c[b].getNode())&&a.nodeType&&d.push(a);return d},getLayer:function(){return this._layer},
draw:function(){var a=this._graphicsLayer;return a&&a._draw(this,!0),this},setGeometry:function(a){this.geometry=a;a=this._graphicsLayer;return a&&(a._updateExtent(this),a._draw(this,!0)),this},setSymbol:function(a,b){var c=this._graphicsLayer,d=this._shape;return this.symbol=a,c&&(b&&d&&c._removeShape(this),c._draw(this,!0)),this},setAttributes:function(a){return this.attributes=a,this},setInfoTemplate:function(a){return this.infoTemplate=a,this},getInfoTemplate:function(){return this._getEffInfoTemplate()},
_getEffInfoTemplate:function(){var a=this.getLayer();return this.infoTemplate||a&&a.infoTemplate},getTitle:function(){var a=this.getInfoTemplate(),b=a&&a.title;if(e.isFunction(b))b=b.call(a,this);else if(e.isString(b))var c=(a=this.getLayer())&&a._getDateOpts,b=h.substitute(this.attributes,b,{first:!0,dateFormat:c&&c.call(a)});return b},getContent:function(){var a=this.getInfoTemplate(),b=a&&a.content;if(e.isFunction(b))b=b.call(a,this);else if(e.isString(b))var c=(a=this.getLayer())&&a._getDateOpts,
b=h.substitute(this.attributes,b,{dateFormat:c&&c.call(a)});return b},attr:function(a,b){var c,d=this.getNodes(),e=d.length;for(c=0;e>c;c++)null==b?d[c].removeAttribute(a):d[c].setAttribute(a,b);return this},show:function(){this.visible=this._visible=!0;var a,b,c;if(this.getShapes().length)for(a=this.getNodes(),c=a.length,this.attr("data-hidden"),b=0;c>b;b++)g.show(a[b]);else this._graphicsLayer&&this._graphicsLayer._draw(this,!0);return this},hide:function(){this.visible=this._visible=!1;var a,b,
c;if(b=this._graphicsLayer)if("canvas-2d"===b.surfaceType)b._removeShape(this);else if(a=this.getNodes(),c=a.length)for(this.attr("data-hidden",""),b=0;c>b;b++)g.hide(a[b]);return this},toJson:function(){var a={};return this.geometry&&(a.geometry=this.geometry.toJson()),this.attributes&&(a.attributes=e.mixin({},this.attributes)),this.symbol&&(a.symbol=this.symbol.toJson()),this.infoTemplate&&(a.infoTemplate=this.infoTemplate.toJson()),a}});return d.prototype.getShape=d.prototype.getDojoShape,k("extend-esri")&&
(l.Graphic=d),d});