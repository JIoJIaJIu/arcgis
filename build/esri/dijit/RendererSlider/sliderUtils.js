//>>built
define("esri/dijit/RendererSlider/sliderUtils","../../numberUtils dojo/i18n!../../nls/jsapi dojo/_base/array dojo/_base/lang dojo/dom-style dojo/string dijit/Tooltip dojox/gfx".split(" "),function(v,x,k,y,e,w,A,B){return{histogramXAvgPadding:18,labelTopOffset:3,generateTransparentBackground:function(b,a,c,d){b=b.createRect({width:a,height:c}).setFill(d?this.getTransparentFill():null);return b.moveToBack(),b},getTransparentFill:function(){return{type:"pattern",x:0,y:0,width:16,height:16,src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZlcnNpb249IjEuMSIgaGVpZ2h0PSIxNiIgd2lkdGg9IjE2Ij48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNjY2MiIC8+PHBhdGggZD0iTTAgMCBMOCAwIEw4IDggTDAgOCBaIiBmaWxsPSIjZmZmIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLDgpIiAvPjxwYXRoIGQ9Ik0wIDAgTDggMCBMOCA4IEwwIDggWiIgZmlsbD0iI2NjYyIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoOCw4KSIgLz48cGF0aCBkPSJNMCAwIEw4IDAgTDggOCBMMCA4IFoiIGZpbGw9IiNmZmYiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgsMCkiIC8+PC9zdmc+"}},
generateHistogramSurface:function(b,a,c,d){b=B.createSurface(b,a,c);return e.set(b.rawNode,{overflow:"visible",display:"inline-block",left:d+"px"}),b.rawNode.setAttribute("class","esri-histogram-surface"),b},generateCountTooltips:function(b,a){var c,d=[];return c=k.map(b.bins,function(a){return"object"==typeof a?a.count:a}),c.reverse(),k.forEach(c,y.hitch(this,function(c,b){var e=w.substitute(x.widgets.rendererSlider.count,{count:c});d.push(new A({connectId:[a.children[b].rawNode],label:e}))})),d},
generateHistogram:function(b,a,c,d,g){var f,l,m,n=b.createGroup();return n.rawNode.setAttribute("class","esri-histogram-group"),f=k.map(a.bins,function(a){return"object"==typeof a?a.count:a}),f.reverse(),l=b.getDimensions().height/f.length,k.forEach(f,y.hitch(this,function(a,b){m=0<a?(c-this.histogramXAvgPadding)*(a/Math.max.apply(Math,f)):0;var d=n.createRect({width:m,height:l}).setFill("#aaa").setTransform(B.matrix.translate(0,l*b));d.rawNode.setAttribute("class","esri-histogram-bar");d.rawNode.setAttribute("shape-rendering",
"crispEdges")})),e.set(b.rawNode,{display:"inline-block",left:d+"px"}),g||n.setTransform({dx:c,dy:0,xx:-1,xy:0,yx:0,yy:1}),n},generateAvgLine:function(b,a,c,d,g,f){var l,m,n,k,t=b.rawNode.getAttribute("width"),p=b.rawNode.getAttribute("height");c=Math.round(c);return l=b.createLine({x1:g?0:12,y1:c,x2:g?t-this.histogramXAvgPadding+4:t,y2:c}).setStroke({color:"#667"}).moveToBack(),l.rawNode.setAttribute("shape-rendering","crispEdges"),m=b.createImage({x:g?t-this.histogramXAvgPadding+6:0,y:c-8,width:12,
height:14,src:require.toUrl("esri/dijit/RendererSlider/images/xAvg.png")}),f?a=v.format(parseFloat(a.toFixed(2))).toString()+"%":(d=2>d?2:d,a=v.format(parseFloat(a.toFixed(d))).toString()),k=w.substitute(x.widgets.rendererSlider.statsAvg,{avg:a}),n=new A({connectId:[m.rawNode],label:k}),c>p||0>c?(e.set(l.rawNode,"display","none"),e.set(m.rawNode,"display","none")):(e.set(l.rawNode,"display","block"),e.set(m.rawNode,"display","block")),{avgHandleLine:l,avgHandleImage:m,avgHandleTooltip:n}},getCombinedPrecision:function(b,
a){var c=this.getPrecision(b),d=this.getPrecision(a);return-10<b&&10>b&&-10<a&&10>a&&2>c&&2>d?2:c>d?c:d},getPrecision:function(b){for(var a,c=1;Math.round(b*c)/c!==b;)c*=10;return a=Math.round(Math.log(c)/Math.LN10),20<a?20:a},_resetLabelPositions:function(b){k.forEach(b,function(a){if(a){var c=a.labelNode;c&&(e.set(c,"top","3px"),a.labelNode._autoPositioned=!1)}})},_autoPositionHandleLabels:function(b){var a=[];if(0!==b.length&&(this._resetLabelPositions(b),k.forEach(b,function(c,b){c&&c.labelNode&&
a.push({index:b,handle:c,label:c.labelNode,rect:c.labelNode.getBoundingClientRect()})}),0!==a.length))switch(a.length){case 1:break;case 2:this._autoPositionTwoHandles(b,a);break;case 3:this._autoPositionThreeHandles(b,a);break;default:this._autoPositionManyHandles(b,a)}},_autoPositionTwoHandles:function(b,a){var c,d,g,f;this.collisionCheck(a[0].rect,a[1].rect)&&(c=a[0].rect.top-a[1].rect.top,d=(a[0].rect.height-c)/2,g=this.labelTopOffset+d,f=this.labelTopOffset-d,e.set(a[0].label,"top",g+"px"),e.set(a[1].label,
"top",f+"px"),a[0].label._autoPositioned=!0,a[1].label._autoPositioned=!0)},_autoPositionThreeHandles:function(b,a){var c,d,g,f,l,m;if(k.forEach(a,y.hitch(this,function(b,k){var h=a[k-1];h&&h.rect&&this.collisionCheck(b.rect,h.rect)&&(b.label._autoPositioned&&!h.label._autoPositioned?(c=h.rect.top-b.rect.top,g=b.rect.height,f=g-c+this.labelTopOffset,e.set(h.label,"top",f+"px"),h.label._autoPositioned=!0):!b.label._autoPositioned&&h.label._autoPositioned?(c=h.rect.top-b.rect.top,g=b.rect.height,f=
-1*(g-c)+Number(h.label.style.top.replace("px","")),e.set(b.label,"top",f+"px"),b.label._autoPositioned=!0):(c=h.rect.top-b.rect.top,d=(b.rect.height-c)/2,l=this.labelTopOffset-d,m=this.labelTopOffset+d,e.set(h.label,"top",m+"px"),e.set(b.label,"top",l+"px"),h.label._autoPositioned=!0,b.label._autoPositioned=!0))})),a[2].handle&&10>a[2].handle.style.top.replace("px","")){var n,v,t,p,q=a[2].label,r=a[1].label,u=a[0].label,x=q.getBoundingClientRect(),z=r.getBoundingClientRect(),w=u.getBoundingClientRect();
q._autoPositioned&&r._autoPositioned&&u._autoPositioned?(n=Number(q.style.top.replace("px",""))+8,v=Number(r.style.top.replace("px",""))+8,t=Number(u.style.top.replace("px",""))+8,e.set(q,"top",n+"px"),e.set(r,"top",v+"px"),e.set(u,"top",t+"px")):(q._autoPositioned&&(p=Number(q.style.top.replace("px",""))+4,e.set(q,"top",p+"px")),r._autoPositioned&&z.top-x.top<z.height&&(p=Number(r.style.top.replace("px",""))+4,e.set(r,"top",p+"px")),w.top-z.top<w.height&&(p=Number(u.style.top.replace("px",""))+4,
e.set(u,"top",p+"px")))}},_autoPositionManyHandles:function(){},collisionCheck:function(b,a){return!(b.right<a.left||b.left>a.right||b.bottom<a.top||b.top>a.bottom)}}});