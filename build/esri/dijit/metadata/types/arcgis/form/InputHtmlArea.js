//>>built
define("esri/dijit/metadata/types/arcgis/form/InputHtmlArea","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred dijit/Dialog dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-style dojo/has ../../../../../kernel ../../../base/etc/docUtil ../../../base/xml/xmlUtil ../../../form/InputTextArea ../../../form/tools/ClickableTool ../../../editor/util/OkCancelBar dojo/i18n!../../../nls/i18nArcGIS dijit/Editor dijit/_editor/plugins/FontChoice dijit/_editor/plugins/TextColor dijit/_editor/plugins/ViewSource dijit/_editor/plugins/LinkDialog".split(" "),
function(h,p,l,B,q,k,m,g,C,r,t,n,u,v,w,x,y,z){h=h([v],{postCreate:function(){this.inherited(arguments);this._makeEditTool()},_makeEditTool:function(){var a=this;m.add(this.domNode,"gxeInputHtmlTextArea");var c=g.create("span",{},this.focusNode,"after");new w({label:y.htmlEditor.button,whenToolClicked:function(){a._openDialog()}},c)},_openDialog:function(){var a,c=this,b=null,e=this.parentXNode.label,d=this.getInputValue();null===d&&(d="");var d=d.replace(/(\r\n|\r|\n|\n\r)/g,"\x3cbr /\x3e"),f=g.create("div",
{});a=new z({plugins:["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","createLink","unlink","removeFormat","|","undo","redo","|","viewsource",{name:"dijit._editor.plugins.FontChoice",command:"fontName",custom:"Arial;Courier New;Garamond;Tahoma;Times New Roman;Verdana".split(";")},{name:"dijit._editor.plugins.FontChoice",command:"fontSize",custom:["2","3","4","5","6"]}]},
g.create("div",{},f));a.setValue(d);a.startup();var A=new x({onOkClick:function(){if(a){var d=a.get("value");null!==d&&(c.setInputValue(d),b&&b.hide())}},onCancelClick:function(){b&&b.hide()}},g.create("div",{},f)),b=new q({"class":"gxeDialog gxePopupDialog gxeHtmlEditorDialog",title:e,content:f});c.isLeftToRight()||m.add(b.domNode,"gxeRtl");c.own(b.on("hide",function(){setTimeout(function(){a.destroyRecursive(!1);A.destroyRecursive(!1);b.destroyRecursive(!1)},300)}));b.show()},getInputValue:function(){return this.focusNode?
n.cleanHtml(this.focusNode.value):null},setInputValue:function(a){"undefined"==typeof a&&(a=null);a=n.cleanHtml(a);this.focusNode.value=a;this.emitInteractionOccurred();this.applyViewOnly()},setNodeText:function(a,c){if(a===this.viewOnlyNode)try{this._cleanForView(a,c)}catch(b){console.error(b)}else this.inherited(arguments)},_cleanForView:function(a,c){var b=g.create("div",{},a,"last");b.innerHTML=c;this._walkForView(b)},_walkForView:function(a){var c,b,e,d,f;a.nodeType===u.nodeTypes.ELEMENT_NODE&&
(c=a.localName,"undefined"!=typeof c&&null!==c&&(b=c.toLowerCase(),l.forEach(a.attributes,function(b){e=b.localName;"undefined"!=typeof e&&null!==e&&(d=e.toLowerCase(),0===d.indexOf("on")?k.set(a,e,null):"href"===d&&(f=b.nodeValue,"undefined"!=typeof f&&null!==f&&0===f.toLowerCase().indexOf("http")&&k.remove(a,e)))},this),"a"===b&&k.set(a,"target","_blank"),l.forEach(a.childNodes,function(a){this._walkForView(a)},this)))}});return r("extend-esri")&&p.setObject("dijit.metadata.types.arcgis.form.InputHtmlArea",
h,t),h});