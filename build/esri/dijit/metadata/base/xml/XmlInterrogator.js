//>>built
define("esri/dijit/metadata/base/xml/XmlInterrogator","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./XmlFlattener ./xmlUtil ../../../../kernel".split(" "),function(m,n,l,p,q,r,t){m=m(null,{constructor:function(a){n.mixin(this,a)},interrogate:function(a,b){var e=(new q).flatten(a),h=e.prefixesByUri,c=e.valuesByPath,g={};l.forEach(b,function(k){var a=k.interrogationRules;if(a&&0!==a.length){var f=r.makeGxeUrisByPrefix(k.getNamespaces());k=k.key;var d=a.length,b=0,e=!1;l.forEach(a,function(k){var d,
g=k.path;if(g)if(d=this._transformPath(h,f,g),this._evaluateMatch(c,d,k))b++;else if(a.must)return void(e=!0)},this);!e&&0<b&&(g[k]={nRules:d,nRulesMatched:b})}},this);var f=null,d=0;return l.forEach(b,function(a){var c=a.key,b=null;c in g&&(b=g[c],null===f?(f=a,d=b.nRulesMatched):b.nRulesMatched>d&&b.nRules===b.nRulesMatched&&(f=a,d=b.nRulesMatched))}),f},_evaluateMatch:function(a,b,e){var h=!1,c=null;if("undefined"!=typeof e.value&&(c=e.value),b in a){if(null===c)return!0;a=a[b];h=l.some(a,function(a){return c===
a})}return h},_transformPath:function(a,b,e){var h,c,g,f=[];return l.forEach(e.split("/"),function(d){var e=-1!==d.indexOf("@");h=d.replace("@","").split(":");2===h.length?(c=null,g=b[h[0]],g&&(c=a[g]),c?(e&&(c="@"+c),f.push(c+":"+h[1])):f.push(d)):f.push(d)}),f.join("/")}});return p("extend-esri")&&n.setObject("dijit.metadata.base.xml.XmlInterrogator",m,t),m});