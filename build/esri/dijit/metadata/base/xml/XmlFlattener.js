//>>built
define("esri/dijit/metadata/base/xml/XmlFlattener","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./xmlUtil ../../../../kernel".split(" "),function(g,k,h,m,l,n){g=g(null,{constructor:function(a){k.mixin(this,a)},flatten:function(a,c){var b={domIndex:{},domList:[],nNsPfx:0,nsPfxByUri:{},gxePfxByUri:{}};c&&(b.gxePfxByUri=this._makeGxePfxByUri(c));this._flattenDom({domData:b},a.documentElement,"");return{valuesByPath:b.domIndex,paths:b.domList,prefixesByUri:b.nsPfxByUri}},flattenNode:function(a,
c){var b={domIndex:{},domList:[],nNsPfx:0,nsPfxByUri:{},gxePfxByUri:c};return this._flattenDom({domData:b},a,null),b.domIndex},_flattenDom:function(a,c,b){var e=a.domData,f=l.nodeTypes.ELEMENT_NODE,d=this._flattenDomQN(e,c);null!=b&&(d=b+"/"+d);this._flattenDomValue(e,c,d);h.forEach(c.attributes,function(a){var b=this._flattenDomQN(e,a);this._flattenDomValue(e,a,d+"/@"+b)},this);h.forEach(c.childNodes,function(b){b.nodeType===f&&this._flattenDom(a,b,d)},this)},_flattenDomQN:function(a,c){var b=c.localName,
e=b,f=null,d=c.namespaceURI;return d&&(d in a.gxePfxByUri?f=a.gxePfxByUri[d]:d in a.nsPfxByUri?f=a.nsPfxByUri[d]:(a.nNsPfx++,f="_"+a.nNsPfx,a.nsPfxByUri[d]=f),e=f+":"+b),e},_flattenDomValue:function(a,c,b){c=this._getDomNodeText(c);b in a.domIndex?a.domIndex[b].push(c):(a.domIndex[b]=[c],a.domList.push(b))},_getDomNodeText:function(a){return l.getNodeText(a)},_makeGxePfxByUri:function(a){var c={};return a&&h.forEach(a.getNamespaces(),function(a){a.prefix&&a.uri&&(c[a.uri]=a.prefix)}),c}});return m("extend-esri")&&
k.setObject("dijit.metadata.base.xml.XmlFlattener",g,n),g});