//>>built
define("esri/dijit/metadata/base/etc/validationUtil",["dojo/_base/lang","dojo/_base/array","dojo/has","dojo/i18n!../../nls/i18nBase","../../../../kernel"],function(g,l,n,f,p){var m={formatMessage:function(a,c){var b,d=a.label,e=null,h=f.validation.pattern,k=f.validation.patternWithHint;return!a.isValid&&a.considerHint&&(b=a.inputWidget.hint,"undefined"!=typeof b&&null!==b&&(b=g.trim(b),0<b.length&&(e=b))),null!=e?k.replace("{label}",d).replace("{message}",c).replace("{hint}",e):h.replace("{label}",
d).replace("{message}",c)},validateValue:function(a,c){if(a.isValid=!0,a.message=this.formatMessage(a,f.validation.ok),a._continue=!0,this._checkEmpty(a,c),a.isValid&&a._continue&&(this._checkAlternates(a,c),a.isValid&&a._continue))(a.considerHint=!0,a.inputWidget._isGxeInputNumber)?this._checkNumber(a,c):a.inputWidget._isFgdcInputDate?this._checkFgdcDate(a,c):a.inputWidget._isFgdcInputTime?this._checkFgdcTime(a,c):!a.inputWidget._isGxeInputDate||(a.inputWidget.forceTime?this._checkDateTime(a,c):
a.inputWidget.allowTime&&-1!==c.indexOf("T")?this._checkDateTime(a,c):this._checkDate(a,c))},_checkAlternates:function(a,c){var b,d=a.xnodeWidget.alternateValues;d&&d.push&&0<d.length&&(b=l.some(d,function(a){return a===c}),b&&(a._continue=!1))},_checkDate:function(a,c){var b=!1,d=/^(\d{2})$/,e=c.split("-");/^(\d{4})$/.test(e[0])&&(1<e.length?d.test(e[1])&&(2<e.length?3==e.length&&("Z"===e[2].charAt(e[2].length-1)&&(e[2]=e[2].substring(0,e[2].length-1)),d.test(e[2])&&(b=!0)):b=!0):b=!0);b||(a.isValid=
!1,a.message=this.formatMessage(a,f.validation.date))},_checkDateTime:function(a,c){/^(-?(?:[1-9][0-9]*)?[0-9]{4})-(1[0-2]|0[1-9])-(3[0-1]|0[1-9]|[1-2][0-9])T(2[0-3]|[0-1][0-9]):([0-5][0-9]):([0-5][0-9])(\.[0-9]+)?(Z|[+-](?:2[0-3]|[0-1][0-9]):[0-5][0-9])?$/.test(c)||(a.isValid=!1,a.message=this.formatMessage(a,f.validation.other))},_checkEmpty:function(a,c){var b=a.isRequired,d=a.xnodeWidget.serializeIfEmpty,e=null===c;if(null!=c&&("string"==typeof c?e=a.xnodeWidget.trim?0===g.trim(c).length:0===
c.length:c.push&&(e=0===c.length)),e)if(b)if(d)a._continue=!1;else{if(this._checkIndeterminates(a,c),a._continue)a.isValid=!1,a.message=this.formatMessage(a,f.validation.empty)}else a._continue=!1},_checkFgdcDate:function(a,c){var b=!1;0===c.indexOf("-")&&(b=!0);var d=c.replace(/-/g,"");b&&(d="-"+d);/^\d{4}(\d{2}(\d{2})?)?$/.test(d)||(a.isValid=!1,a.message=this.formatMessage(a,f.validation.date))},_checkFgdcTime:function(a,c){var b=c.replace(/:/g,""),b=b.replace(/\./g,""),d=/^\d{2}(\d{2}(\d{2,})?)?[+\-]\d{4}$/,
e=/^\d{2}(\d{2}(\d{2,})?)?Z$/;/^\d{2}(\d{2}(\d{2,})?)?$/.test(b)||d.test(b)||e.test(b)||(a.isValid=!1,a.message=this.formatMessage(a,f.validation.other))},_checkIndeterminates:function(a){if(a.xnodeWidget._isGxeElement){var c,b=a.xnodeWidget.target,d=null;"gml:beginPosition"!==b&&"gml:endPosition"!==b||(d=a.xnodeWidget.findAttributes(),l.some(d,function(b){return"indeterminatePosition"===b.target?(!b._isOptionallyOff&&b.inputWidget&&(c=b.inputWidget.getInputValue(),("unknown"===c||"now"===c)&&(a._continue=
!1)),!0):void 0}))}},_checkNumber:function(a,c){var b,d=a.inputWidget,e=d.minValue,h=d.maxValue;if(d.integerOnly){if(b=/(^-?\d\d*$)/,!b.test(c))return a.isValid=!1,void(a.message=this.formatMessage(a,f.validation.integer))}else b=/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/,b.test(c)||(a.isValid=!1,a.message=this.formatMessage(a,f.validation.number));if(null!==e||null!==h){b=Number(c);var k=!0,g=!0;null!=e&&(k=d.minValueIsExclusive?b>e:b>=e);null!=h&&(g=d.maxValueIsExclusive?h>b:h>=b);k&&g||(a.isValid=
!1,a.message=this.formatMessage(a,f.validation.other))}}};return n("extend-esri")&&g.setObject("dijit.metadata.base.etc.validationUtil",m,p),m});