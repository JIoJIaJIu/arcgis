//>>built
define("esri/dijit/geoenrichment/OneVar","../../declare ./BaseWidget ./dom dojo/dom-class dojo/dom-construct dojo/dom-attr dojo/query dojo/string ./lang dojo/i18n!../../nls/jsapi ./utils ./formatVariable".split(" "),function(v,w,r,m,n,h,x,y,u,l,z,q){l=l.geoenrichment.dijit.OneVar;return v("esri.dijit.geoenrichment.OneVar",[w],{baseClass:"Infographics_OneVar",constructor:function(){this._state={sortBy:1,sortDesc:!0}},_calculate:function(){var a=this.getDataFields(),d=this.getFieldByIndex(a[0]);return this.primary.innerHTML=
this.formatByIndex(0,a[0])+" ",{firstCol:d}},updateUIExpanded:function(){this.inherited(arguments);var a,d=this._calculate().firstCol,b=null;if(d){var g=[],f=this.data.features.length;for(a=0;f>a;a++){var c=[];b||(b=c);c.push(this.getFeatureTitle(a));c.push(this.getValueByName(a,d.name));g.push(c)}this.site.innerHTML=l.subtitleSite2;this._sortRows(g);a=this.getValueByName(0,d.name);if(c=u.isNumber(a)){var e=this.getValueByName(f-1,d.name),f=this.getFeatureTitle(f-1);a=1-e/a;.005>Math.abs(a)&&(a=0);
this.comp.innerHTML=y.substitute(0>a?l.lessThan:0<a?l.moreThan:l.same,{site:f})}else this.comp.innerHTML="";for(var f=this.table,k=g.length+1;1<f.rows.length;)f.deleteRow(-1);e=f.rows[0];if(c)for(;4>e.cells.length;)e.insertCell(-1);else for(;2<e.cells.length;)n.destroy(e.cells[e.cells.length-1]);for(a=1;k>a;a++){var p=f.insertRow(-1);if(0===a%2&&0<a&&(p.className="AlternatingRow"),h.set(p.insertCell(-1),"class","OneVarMultiComparison_TextColumn"),h.set(p.insertCell(-1),"class","OneVarMultiComparison_ValueColumn"),
c)p=h.set(p.insertCell(-1),"class","OneVarMultiComparison_ChartColumn"),h.set(p,"colspan","2")}k=Number.NEGATIVE_INFINITY;if(c){for(a=0;a<g.length;a++)g[a][1]>k&&(k=g[a][1]);k=z.getCeiling(k);f.rows[0].cells[2].innerHTML=q(d,0);f.rows[0].cells[3].innerHTML=q(d,k)}for(a=0;a<g.length;a++)if(e=f.rows[a+1],e.cells[0].innerHTML=g[a][0],e.cells[1].innerHTML=q(d,g[a][1]),c){var t;g[a]===b?(m.remove(e,"OneVarMultiComparison_Row"),m.add(e,"OneVarMultiComparison_CurrentRow"),t="OneVarMultiComparison_Expanded_CurrentBar"):
(m.remove(e,"OneVarMultiComparison_CurrentRow"),m.add(e,"OneVarMultiComparison_Row"),t="OneVarMultiComparison_Expanded_Bar");p=r.pct(g[a][1]/k);e.cells[2].innerHTML="\x3cdiv class\x3d'"+t+"' style\x3d'width:"+p+"' /\x3e";h.set(e.cells[0],"style","width:50%");h.set(e.cells[1],"style","width:20%")}else h.set(e.cells[0],"style","width:50%"),h.set(e.cells[1],"style","width:50%")}},updateUICollapsed:function(){this.inherited(arguments);var a,d=this._calculate().firstCol,b=null;if(d){var g=[],f=this.data.features.length;
for(a=0;f>a;a++){var c=[];b||(b=c);c.push(this.getFeatureTitle(a));c.push(this.getValueByName(a,d.name));g.push(c)}this._sortRows(g);var c=this.getValueByName(0,d.name),f=this.table,e=g.length+1;for(a=f.rows.length;e>a;a++){var k=f.insertRow(-1);0===a%2&&(k.className="AlternatingRow");h.set(k.insertCell(-1),"class","OneVarMultiComparison_TextColumn");h.set(k.insertCell(-1),"class","OneVarMultiComparison_ValueColumn")}for(;f.rows.length>e;)f.deleteRow(-1);a=u.isNumber(c);c=x("col",this.table);a?(h.set(c[0],
"style","width:70%"),h.set(c[1],"style","width:30%")):(h.set(c[0],"style","width:50%"),h.set(c[1],"style","width:50%"));for(a=0;a<g.length;a++)c=f.rows[a+1],c.cells[0].innerHTML=g[a][0],c.cells[1].innerHTML=q(d,g[a][1]),g[a]===b?(m.remove(c,"OneVarMultiComparison_Row"),m.add(c,"OneVarMultiComparison_CurrentRow")):(m.remove(c,"OneVarMultiComparison_CurrentRow"),m.add(c,"OneVarMultiComparison_Row"))}},createUIExpanded:function(a){this.inherited(arguments);var d=a.addHeader("div",{"class":"OneVarMultiComparison_Value"}),
d=n.create("table",{cellpadding:"0",cellspacing:"0"},d),b=d.insertRow(0),b=b.insertCell(-1);this.site=n.create("span",{"class":"OneVarMultiComparison_Expanded_Value_Site"},b);b=d.insertRow(-1);b=b.insertCell(-1);this.primary=n.create("span",{"class":"OneVarMultiComparison_Expanded_Value_Primary"},b);this.comp=n.create("span",{"class":"OneVarMultiComparison_Comparison"},b);this.table=a.addContent("table",{"class":"OneVarMultiComparison_Table"});r.createCols(this.table,[.5,.2,.15,.15]);b=this.table.insertRow(-1);
this._appendSortHeader(b,l.areaCol,0,{"class":"OneVarMultiComparison_TextColumnHeader"});this._appendSortHeader(b,l.valueCol,1,{"class":"OneVarMultiComparison_ValueColumnHeader"});h.set(b.insertCell(-1),"class","OneVarMultiComparison_ChartColumnHeader_Lower");h.set(b.insertCell(-1),"class","OneVarMultiComparison_ChartColumnHeader_Upper");this.autoHeight&&a.contentClass.push("OneVarMultiComparison_Expanded_ContentPane");a.addFooter("div")},createUICollapsed:function(a){this.inherited(arguments);var d=
a.addHeader("div",{"class":"OneVarMultiComparison_Value"}),d=n.create("table",{cellpadding:"0",cellspacing:"0"},d),b=d.insertRow(0),b=b.insertCell(-1);this.site=n.create("span",{"class":"OneVarMultiComparison_Expanded_Value_Site"},b);b=d.insertRow(-1);b=b.insertCell(-1);this.primary=n.create("span",{"class":"OneVarMultiComparison_Expanded_Value_Primary"},b);this.table=a.addContent("table",{"class":"OneVarMultiComparison_Table"});r.createCols(this.table,[.7,.3]);b=this.table.insertRow(-1);this._appendSortHeader(b,
l.areaCol,0,{"class":"OneVarMultiComparison_TextColumnHeader"});this._appendSortHeader(b,l.valueCol,1,{"class":"OneVarMultiComparison_ValueColumnHeader"});h.set(b.insertCell(-1),"class","OneVarMultiComparison_ChartColumnHeader_Lower");h.set(b.insertCell(-1),"class","OneVarMultiComparison_ChartColumnHeader_Upper");this.autoHeight&&a.contentClass.push("OneVarMultiComparison_Expanded_ContentPane");a.addFooter("div")}})});