//>>built
require({cache:{"url:esri/dijit/templates/SingleFilter.html":'\x3cdiv class\x3d"esriSingleFilterForm singleFilter" id\x3d"${id}.singleFilter"\x3e\n  \x3cdiv\x3e\n    \x3ctable id\x3d"${id}.exprTable" class\x3d"rowTable" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\n      \x3ctbody\x3e\n        \x3ctr\x3e\n          \x3ctd valign\x3d"top" nowrap\x3e\n            \x3cdiv id\x3d"${id}.column1"\x3e\n            \x3c/div\x3e\n          \x3c/td\x3e\n          \x3ctd valign\x3d"top" nowrap\x3e\n            \x3cdiv id\x3d"${id}.column2"\x3e\n            \x3c/div\x3e\n          \x3c/td\x3e\n          \x3ctd valign\x3d"top" nowrap\x3e\n            \x3cdiv id\x3d"${id}.column3"\x3e\n            \x3c/div\x3e\n          \x3c/td\x3e\n          \x3ctd valign\x3d"top" nowrap\x3e\n            \x3cdiv id\x3d"${id}.column4"\x3e\n            \x3c/div\x3e\n          \x3c/td\x3e\n          \x3ctd valign\x3d"top" nowrap\x3e\n            \x3cdiv id\x3d"${id}.column5"\x3e\n            \x3c/div\x3e\n          \x3c/td\x3e\n          \x3ctd valign\x3d"top" nowrap\x3e\n            \x3cdiv id\x3d"${id}.column6"\x3e\n            \x3c/div\x3e\n          \x3c/td\x3e\n          \x3ctd valign\x3d"top" nowrap\x3e\n            \x3cdiv id\x3d"${id}.column7"\x3e\n            \x3c/div\x3e\n          \x3c/td\x3e\n          \x3ctd valign\x3d"top" nowrap\x3e\n            \x3ca id\x3d"${id}.deleteExpression" href\x3d"JavaScript:void(0);" style\x3d"margin:0 5px;display:none;" class\x3d"esriAGOFilterRemoveIcon" title\x3d"${i18n.deleteExpression}"\x3e\x3c/a\x3e\n          \x3c/td\x3e\n        \x3c/tr\x3e\n        \x3ctr data-dojo-attach-point\x3d"_interactiveFilterRow"\x3e\n          \x3ctd colspan\x3d"8"\x3e\n            \x3ctable cellpadding\x3d"0" cellspacing\x3d"0" class\x3d"interactiveFilter"\x3e\n              \x3ctbody\x3e\n                \x3ctr\x3e\n                  \x3ctd nowrap\x3d"nowrap"\x3e\n                    \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\n                      \x3ctbody\x3e\n                        \x3ctr\x3e\n                          \x3ctd nowrap\x3d"nowrap"\x3e\n                            \x3cinput dojoAttachPoint\x3d"interactiveCheck" type\x3d"checkbox" class\x3d"promptCheckBox" title\x3d"${i18n.promptMsg}"/\x3e\n                          \x3c/td\x3e\n                          \x3ctd nowrap\x3d"nowrap"\x3e\n                            \x3clabel class\x3d"labels" for\x3d"promptCheckBox"\x3e\n                              \x26nbsp;\x26nbsp;${i18n.askForValues}\n                            \x3c/label\x3e\n                          \x3c/td\x3e\n                          \x3ctd\x3e\n                            \x3cspan dojoAttachPoint\x3d"interactiveArrow" style\x3d"color:#cbcbcb;cursor:pointer;" class\x3d"showHidePromptDiv"\x3e\x26nbsp;\x26#9660;\x3c/span\x3e\n                          \x3c/td\x3e\n                        \x3c/tr\x3e\n                      \x3c/tbody\x3e\n                    \x3c/table\x3e\n                  \x3c/td\x3e\n                \x3c/tr\x3e\n                \x3ctr dojoAttachPoint\x3d"interactiveSpace" style\x3d"display:none"\x3e\n                  \x3ctd nowrap\x3d"nowrap"\x3e\n                    \x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e\n                      \x3ctbody\x3e\n                        \x3ctr\x3e\n                          \x3ctd nowrap\x3d"nowrap"\x3e\n                            ${i18n.prompt}\n                          \x3c/td\x3e\n                          \x3ctd width\x3d"10"\x3e\n                            \x26nbsp;\n                          \x3c/td\x3e\n                          \x3ctd\x3e\n                            \x3cdiv dojoAttachPoint\x3d"promptText" dojotype\x3d"dijit.form.TextBox" intermediateChanges\x3d"true" style\x3d"width:250px;"\x3e\n                            \x3c/div\x3e\n                          \x3c/td\x3e\n                        \x3c/tr\x3e\n                        \x3ctr\x3e\n                          \x3ctd nowrap\x3d"nowrap"\x3e\n                            ${i18n.hint}\n                          \x3c/td\x3e\n                          \x3ctd width\x3d"10"\x3e\n                            \x26nbsp;\n                          \x3c/td\x3e\n                          \x3ctd\x3e\n                            \x3cdiv dojoAttachPoint\x3d"hintText" dojotype\x3d"dijit.form.TextBox" intermediateChanges\x3d"true" style\x3d"width:250px;"\x3e\n                            \x3c/div\x3e\n                          \x3c/td\x3e\n                        \x3c/tr\x3e\n                      \x3c/tbody\x3e\n                    \x3c/table\x3e\n                  \x3c/td\x3e\n                \x3c/tr\x3e\n              \x3c/tbody\x3e\n            \x3c/table\x3e\n          \x3c/td\x3e\n        \x3c/tr\x3e\n      \x3c/tbody\x3e\n    \x3c/table\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"promptDiv" style\x3d"display:none;padding:10px 0px;"\x3e\n    \x3clabel class\x3d"labels promptLabels" for\x3d"txtPrompt"\x3e\n      ${i18n.prompt}\n    \x3c/label\x3e\n    \x3cinput class\x3d"promptFields txtPrompt" type\x3d"text"/\x3e\n    \x3cbr/\x3e\n    \x3clabel class\x3d"labels promptLabels" for\x3d"txtHint"\x3e\n      ${i18n.hint}\n    \x3c/label\x3e\n    \x3cinput class\x3d"promptFields txtHint" type\x3d"text" /\x3e\n  \x3c/div\x3e\n\x3c/div\x3e'}});
define("esri/dijit/SingleFilter","require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/connect dojo/_base/json dojo/has dojo/json dojo/string dojo/number dojo/dom dojo/dom-style dojo/dom-attr dojo/dom-construct dojo/query dojo/dom-class dojo/_base/event dojo/Evented dojo/data/ItemFileWriteStore dojo/date/locale dojo/parser dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/_OnDijitClickMixin dijit/_FocusMixin dijit/registry dijit/form/TextBox dijit/form/FilteringSelect dijit/form/RadioButton dijit/form/DateTextBox dijit/form/NumberTextBox ../kernel ../lang ../tasks/GenerateRendererTask ../tasks/UniqueValueDefinition ../tasks/GenerateRendererParameters ../layers/FeatureLayer ../layers/GeoRSSLayer dojo/i18n!../nls/jsapi dojo/text!./templates/SingleFilter.html".split(" "),
function(A,E,p,q,k,V,F,W,G,w,l,t,X,m,B,Y,Z,H,v,u,I,J,K,L,M,N,f,O,x,aa,C,D,y,r,z,P,Q,R,S,T,U){A=E([J,K,L,M,N,H],{declaredClass:"esri.dijit.SingleFilter",widgetsInTemplate:!0,templateString:U,valueHandlers:[],onFieldChangeEnabled:!0,onOperatorChangeEnabled:!0,onPromptChangeHandler:null,onHintChangeHandler:null,fieldDomains:{},fieldsStore:null,fieldsInfo:{stringFieldsCount:0,numberFieldsCount:0,dateFieldsCount:0},stringOperatorStore:null,dateOperatorStore:null,numberOperatorStore:null,uniqueValuesStore:null,
isEnableInteractiveFilter:!0,uniqueValuesResults:{},partsObj:null,dayInMS:86399E3,allowAllDateTypes:!1,postMixInProperties:function(){this.inherited(arguments);this.i18n={};this.i18n=p.mixin(this.i18n,T.filterDlg)},parseExpressionTemplate:function(){var a=function(a,e){l.byId(e).className="attributeValueContainer";"field_dropdown"===a?l.byId(e).innerHTML=b:"operator_dropdown"===a?l.byId(e).innerHTML=c:"values_input"===a?l.byId(e).innerHTML=d+h:console.error("problem with expressionTemplate from localization file")},
b='\x3cselect id\x3d"'+this.id+'.fieldsList" class\x3d"attributeField" data-dojo-type\x3d"dijit/form/FilteringSelect" maxHeight\x3d"150" sortByLabel\x3d"true"\x3e\x3c/select\x3e',c='\x3cselect id\x3d"'+this.id+'.operatorList" class\x3d"operator" data-dojo-type\x3d"dijit/form/FilteringSelect" maxHeight\x3d"150" sortByLabel\x3d"false"\x3e\x3c/select\x3e',d='\x3cdiv id\x3d"'+this.id+'.attributeValueContainer"\x3e\x3c/div\x3e',h='\x3cdiv class\x3d"attributeValueOptions"\x3e\x3ctable cellpadding\x3d"0" cellspacing\x3d"0"\x3e  \x3ctbody\x3e    \x3ctr\x3e      \x3ctd nowrap\x3d"nowrap"\x3e        \x3cinput id\x3d"'+
this.id+'.radioValue" class\x3d"radioValue attributeValueRadio" checked\x3d"checked" name\x3d"'+this.id+'.inputOption" data-dojo-type\x3d"dijit/form/RadioButton" title\x3d"'+this.i18n.valueTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.valueTooltip+'"\x3e'+this.i18n.value+'        \x3c/label\x3e      \x3c/td\x3e      \x3ctd nowrap\x3d"nowrap" class\x3d"esriLeadingPadding05"\x3e        \x3cinput id\x3d"'+this.id+'.radioFields" class\x3d"radioFields attributeValueRadio" name\x3d"'+
this.id+'.inputOption" data-dojo-type\x3d"dijit/form/RadioButton" title\x3d"'+this.i18n.fieldTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.fieldTooltip+'"\x3e'+this.i18n.field+'        \x3c/label\x3e      \x3c/td\x3e      \x3ctd id\x3d"'+this.id+'.radioUniqueColumn" nowrap\x3d"nowrap" class\x3d"esriLeadingPadding05"\x3e        \x3cinput id\x3d"'+this.id+'.radioUnique" class\x3d"radioUnique attributeValueRadio" name\x3d"'+this.id+'.inputOption" data-dojo-type\x3d"dijit/form/RadioButton" title\x3d"'+
this.i18n.uniqueValueTooltip+'"/\x3e        \x3clabel class\x3d"labels" title\x3d"'+this.i18n.uniqueValueTooltip+'"\x3e'+this.i18n.uniqueValues+"        \x3c/label\x3e      \x3c/td\x3e    \x3c/tr\x3e  \x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e",e=this.i18n.expressionTemplate,g=e.indexOf("${"),n=e.substring(0,g).trim();l.byId(this.id+".column1").innerHTML=n.length?"\x3cdiv class\x3d'attributeText'\x3e"+n+"\x3c/div\x3e":"";var n=e.indexOf("}",g+1),f=e.substring(g+2,n);a(f,this.id+".column2");g=e.indexOf("${",
g+1);n=e.substring(n+1,g).trim();l.byId(this.id+".column3").innerHTML=n.length?"\x3cdiv class\x3d'attributeText'\x3e"+n+"\x3c/div\x3e":"";n=e.indexOf("}",g+1);f=e.substring(g+2,n);a(f,this.id+".column4");g=e.indexOf("${",g+1);n=e.substring(n+1,g).trim();l.byId(this.id+".column5").innerHTML=n.length?"\x3cdiv class\x3d'attributeText'\x3e"+n+"\x3c/div\x3e":"";n=e.indexOf("}",g+1);f=e.substring(g+2,n);a(f,this.id+".column6");n=e.substring(n+1,e.length).trim();l.byId(this.id+".column7").innerHTML=n.length?
"\x3cdiv class\x3d'attributeText'\x3e"+n+"\x3c/div\x3e":""},postCreate:function(){this.inherited(arguments);this.parseExpressionTemplate();this.createOperatorStores();this.createFieldsStore(this.fields);this.readCodedValues();I.parse(l.byId(this.id+".exprTable")).then(p.hitch(this,function(){k.connect(this.getFieldsList(),"onChange",this,"onChangeField");k.connect(this.getOperatorList(),"onChange",this,"onChangeOperator");k.connect(f.byId(this.id+".radioValue"),"onClick",this,"showValueInput");k.connect(f.byId(this.id+
".radioFields"),"onClick",this,"showFields");k.connect(f.byId(this.id+".radioUnique"),"onClick",this,"showUniqueList");this.version&&10.1>this.version&&t.set(l.byId(this.id+".radioUniqueColumn"),"display","none");k.connect(l.byId(this.id+".deleteExpression"),"onclick",this,"onClickDeleteExpression");k.connect(this.interactiveCheck,"onclick",this,"onInteractiveClick");k.connect(this.interactiveArrow,"onclick",this,"onClickShowHideInteractive");this.enableInteractiveHandlers();this.isEnableInteractiveFilter||
t.set(this._interactiveFilterRow,"display","none")}))},constructor:function(a){this.id=a.id||"";this.owner=a.owner;this.version=a.version;this.part=a.part;this.fields=a.fields;this.mapLayer=a.mapLayer;!1===a.enableEvents&&(this.onFieldChangeEnabled=!1,this.onOperatorChangeEnabled=!1)},init:function(a){a.part||(this.clearAttributeValueDijits(),this.mapLayer=a.mapLayer,this.version=a.version,this.fields=a.fields,this.createOperatorStores(),this.createFieldsStore(this.fields),this.readCodedValues(),
this.fillFieldsList(this.fieldsStore),this.onChangeField());a.part&&(this.part=a.part,this.buildEditUIField(this.part,this))},destroy:function(){this.clearAttributeValueDijits();q.forEach(f.findWidgets(l.byId(this.id)),function(a){a.destroyRecursive()});this.inherited(arguments)},toJson:function(){var a=null;return this.isInteractiveChecked()&&(a={prompt:this.promptText.attr("value"),hint:this.hintText.attr("value")}),{fieldObj:this.getField(),operator:this.getOperator(),valueObj:this.getValue(),
interactiveObj:a}},buildFriendlyTextExpr:function(a){var b=this.i18n.expressionTemplate,c=function(a,c,d){return G.substitute(b,{field_dropdown:a,operator_dropdown:c,values_input:d})};if(!1===a.valueObj.isValid)return"\x26lt;expression is missing value\x26gt;";var d="";if("string"===a.fieldObj.shortType)a.operator===this.i18n.stringOperatorIsBlank||a.operator===this.i18n.stringOperatorIsNotBlank?d=c(a.fieldObj.label,a.operator,""):"field"===a.valueObj.type?d=c(a.fieldObj.label,a.operator,a.valueObj.label):
(d=this.getDecodedValue(a.interactiveObj?a.interactiveObj.value:a.valueObj.value,a.fieldObj.name),d=c(a.fieldObj.label,a.operator,"'"+d+"'"));else if("number"===a.fieldObj.shortType)if(a.operator===this.i18n.numberOperatorIsBetween||a.operator===this.i18n.numberOperatorIsNotBetween)d=a.interactiveObj?a.interactiveObj.value2:a.valueObj.value2,d=c(a.fieldObj.label,a.operator,w.format(a.interactiveObj?a.interactiveObj.value1:a.valueObj.value1,{pattern:"#####0.##########"})+" "+this.i18n.andBetweenValues+
" "+w.format(d,{pattern:"#####0.##########"}));else if(a.operator===this.i18n.numberOperatorIsBlank||a.operator===this.i18n.numberOperatorIsNotBlank)d=c(a.fieldObj.label,a.operator,"");else if("field"===a.valueObj.type)d=c(a.fieldObj.label,a.operator,a.valueObj.label);else var d=a.interactiveObj?a.interactiveObj.value:a.valueObj.value,h=this.getDecodedValue(d,a.fieldObj.name),d=c(a.fieldObj.label,a.operator,d!==h?"'"+h+"'":w.format(d,{pattern:"#####0.##########"}));else r.isDefined(a.valueObj.value)&&
"field"!==a.valueObj.type&&"string"==typeof a.valueObj.value&&(a.valueObj.value=new Date(a.valueObj.value)),d=a.operator===this.i18n.dateOperatorIsBetween||a.operator===this.i18n.dateOperatorIsNotBetween?c(a.fieldObj.label,a.operator,this.formatFriendlyDate(a.interactiveObj?a.interactiveObj.value1:a.valueObj.value1)+" "+this.i18n.andBetweenValues+" "+this.formatFriendlyDate(a.interactiveObj?a.interactiveObj.value2:this.addDay(a.valueObj.value2))):a.operator===this.i18n.dateOperatorIsBlank||a.operator===
this.i18n.dateOperatorIsNotBlank?c(a.fieldObj.label,a.operator,""):"field"===a.valueObj.type?c(a.fieldObj.label,a.operator,a.valueObj.label):c(a.fieldObj.label,a.operator,this.formatFriendlyDate(a.interactiveObj?a.interactiveObj.value:a.valueObj.value));return d},builtSingleFilterString:function(a,b){if(r.isDefined(a.valueObj.isValid)&&!a.valueObj.isValid)return{whereClause:null};var c=a.valueObj.value,d=a.valueObj.value1,h=a.valueObj.value2,e=!1;if(a.interactiveObj){if(!a.interactiveObj.prompt||
!a.interactiveObj.hint)return{whereClause:null};r.isDefined(b)&&(e=!0,r.isDefined(a.valueObj.value)&&(c="{"+b+"}"),r.isDefined(a.valueObj.value1)&&(d="{"+b+"}"),r.isDefined(a.valueObj.value2)&&(h="{"+(b+1)+"}"))}var g="";if("string"===a.fieldObj.shortType)switch(d="",c&&"field"!==a.valueObj.type&&this.isHostedService(this.mapLayer.url)&&this.containsNonLatinCharacter(c)&&(d="N"),a.operator){case this.i18n.stringOperatorIs:g="field"===a.valueObj.type?a.fieldObj.name+" \x3d "+c:a.fieldObj.name+" \x3d "+
d+"'"+c.replace(/\'/g,"''")+"'";break;case this.i18n.stringOperatorIsNot:g="field"===a.valueObj.type?a.fieldObj.name+" \x3c\x3e "+c:a.fieldObj.name+" \x3c\x3e "+d+"'"+c.replace(/\'/g,"''")+"'";break;case this.i18n.stringOperatorStartsWith:g=a.fieldObj.name+" LIKE "+d+"'"+c.replace(/\'/g,"''")+"%'";break;case this.i18n.stringOperatorEndsWith:g=a.fieldObj.name+" LIKE "+d+"'%"+c.replace(/\'/g,"''")+"'";break;case this.i18n.stringOperatorContains:g=a.fieldObj.name+" LIKE "+d+"'%"+c.replace(/\'/g,"''")+
"%'";break;case this.i18n.stringOperatorDoesNotContain:g=a.fieldObj.name+" NOT LIKE "+d+"'%"+c.replace(/\'/g,"''")+"%'";break;case this.i18n.stringOperatorIsBlank:g=a.fieldObj.name+" IS NULL";break;case this.i18n.stringOperatorIsNotBlank:g=a.fieldObj.name+" IS NOT NULL"}else if("number"===a.fieldObj.shortType)switch(a.operator){case this.i18n.numberOperatorIs:g=a.fieldObj.name+" \x3d "+c;break;case this.i18n.numberOperatorIsNot:g=a.fieldObj.name+" \x3c\x3e "+c;break;case this.i18n.numberOperatorIsAtLeast:g=
a.fieldObj.name+" \x3e\x3d "+c;break;case this.i18n.numberOperatorIsLessThan:g=a.fieldObj.name+" \x3c "+c;break;case this.i18n.numberOperatorIsAtMost:g=a.fieldObj.name+" \x3c\x3d "+c;break;case this.i18n.numberOperatorIsGreaterThan:g=a.fieldObj.name+" \x3e "+c;break;case this.i18n.numberOperatorIsBetween:g=a.fieldObj.name+" BETWEEN "+d+" AND "+h;break;case this.i18n.numberOperatorIsNotBetween:g=a.fieldObj.name+" NOT BETWEEN "+d+" AND "+h;break;case this.i18n.numberOperatorIsBlank:g=a.fieldObj.name+
" IS NULL";break;case this.i18n.numberOperatorIsNotBlank:g=a.fieldObj.name+" IS NOT NULL"}else switch(r.isDefined(c)&&"field"!==a.valueObj.type&&"string"==typeof c&&(c=this.parseFriendlyDate(c)),a.operator){case this.i18n.dateOperatorIsOn:g="field"===a.valueObj.type?a.fieldObj.name+" \x3d "+c:e?a.fieldObj.name+" BETWEEN '{"+b+"}' AND '{"+(b+1)+"}'":a.fieldObj.name+" BETWEEN '"+this.formatDate(c)+"' AND '"+this.formatDate(this.addDay(c))+"'";break;case this.i18n.dateOperatorIsNotOn:g="field"===a.valueObj.type?
a.fieldObj.name+" \x3c\x3e "+c:e?a.fieldObj.name+" NOT BETWEEN '{"+b+"}' AND '{"+(b+1)+"}'":a.fieldObj.name+" NOT BETWEEN '"+this.formatDate(c)+"' AND '"+this.formatDate(this.addDay(c))+"'";break;case this.i18n.dateOperatorIsBefore:g="field"===a.valueObj.type?a.fieldObj.name+" \x3c "+c:a.fieldObj.name+" \x3c '"+this.formatDate(c)+"'";break;case this.i18n.dateOperatorIsAfter:g="field"===a.valueObj.type?a.fieldObj.name+" \x3e "+c:a.fieldObj.name+" \x3e '"+this.formatDate(this.addDay(c))+"'";break;case this.i18n.dateOperatorIsBetween:g=
e?a.fieldObj.name+" BETWEEN '"+d+"' AND '"+h+"'":a.fieldObj.name+" BETWEEN '"+this.formatDate(d)+"' AND '"+this.formatDate(this.addDay(h))+"'";break;case this.i18n.dateOperatorIsNotBetween:g=e?a.fieldObj.name+" NOT BETWEEN '"+d+"' AND '"+h+"'":a.fieldObj.name+" NOT BETWEEN '"+this.formatDate(d)+"' AND '"+this.formatDate(this.addDay(h))+"'";break;case this.i18n.dateOperatorIsBlank:g=a.fieldObj.name+" IS NULL";break;case this.i18n.dateOperatorIsNotBlank:g=a.fieldObj.name+" IS NOT NULL"}return{whereClause:g}},
showDeleteIcon:function(){t.set(l.byId(this.id+".deleteExpression"),"display","block")},hideDeleteIcon:function(){t.set(l.byId(this.id+".deleteExpression"),"display","none")},createFieldsStore:function(a){if(a&&a.length){a=p.clone(a);a=a.sort(function(a,b){return a.label=a.alias||a.name,b.label=b.alias||b.name,a.label<b.label?-1:a.label>b.label?1:0});var b=this.isHostedService(this.mapLayer.url),c=10.2<=this.version;a=q.filter(a,function(a){return"esriFieldTypeString"===a.type||"esriFieldTypeDouble"===
a.type||"esriFieldTypeSingle"===a.type||"esriFieldTypeInteger"===a.type||"esriFieldTypeSmallInteger"===a.type||"esriFieldTypeDate"===a.type&&(this.allowAllDateTypes||b||c)?!0:!1},this);a=q.map(a,function(a,b){var c;switch(a.type){case "esriFieldTypeString":c="string";this.fieldsInfo.stringFieldsCount++;break;case "esriFieldTypeDate":c="date";this.fieldsInfo.dateFieldsCount++;break;default:c="number",this.fieldsInfo.numberFieldsCount++}return{id:b,label:a.label,shortType:c,alias:a.alias,editable:a.editable,
name:a.name,nullable:a.nullable,type:a.type}},this);a.length&&(this.fieldsStore=new v({data:{identifier:"id",label:"label",items:a}}))}},createOperatorStores:function(){var a=[];a.push({name:this.i18n.stringOperatorIs,name_:this.i18n.stringOperatorIs,id:0});a.push({name:this.i18n.stringOperatorIsNot,name_:this.i18n.stringOperatorIsNot,id:1});a.push({name:this.i18n.stringOperatorStartsWith,name_:this.i18n.stringOperatorStartsWith,id:2});a.push({name:this.i18n.stringOperatorEndsWith,name_:this.i18n.stringOperatorEndsWith,
id:3});a.push({name:this.i18n.stringOperatorContains,name_:this.i18n.stringOperatorContains,id:4});a.push({name:this.i18n.stringOperatorDoesNotContain,name_:this.i18n.stringOperatorDoesNotContain,id:5});a.push({name:this.i18n.stringOperatorIsBlank,name_:this.i18n.stringOperatorIsBlank,id:6});a.push({name:this.i18n.stringOperatorIsNotBlank,name_:this.i18n.stringOperatorIsNotBlank,id:7});this.stringOperatorStore=new v({data:{label:"name",identifier:"id",items:a}});a=[];a.push({name:this.i18n.dateOperatorIsOn,
id:0});a.push({name:this.i18n.dateOperatorIsNotOn,id:1});a.push({name:this.i18n.dateOperatorIsBefore,id:2});a.push({name:this.i18n.dateOperatorIsAfter,id:3});a.push({name:this.i18n.dateOperatorIsBetween,id:6});a.push({name:this.i18n.dateOperatorIsNotBetween,id:7});a.push({name:this.i18n.dateOperatorIsBlank,id:8});a.push({name:this.i18n.dateOperatorIsNotBlank,id:9});this.dateOperatorStore=new v({data:{label:"name",identifier:"id",items:a}});a=[];a.push({name:this.i18n.numberOperatorIs,name_:this.i18n.numberOperatorIs,
id:0});a.push({name:this.i18n.numberOperatorIsNot,name_:this.i18n.numberOperatorIsNot,id:1});a.push({name:this.i18n.numberOperatorIsAtLeast,name_:this.i18n.numberOperatorIsAtLeast,id:2});a.push({name:this.i18n.numberOperatorIsLessThan,name_:this.i18n.numberOperatorIsLessThan,id:3});a.push({name:this.i18n.numberOperatorIsAtMost,name_:this.i18n.numberOperatorIsAtMost,id:4});a.push({name:this.i18n.numberOperatorIsGreaterThan,name_:this.i18n.numberOperatorIsGreaterThan,id:5});a.push({name:this.i18n.numberOperatorIsBetween,
name_:this.i18n.numberOperatorIsBetween,id:6});a.push({name:this.i18n.numberOperatorIsNotBetween,name_:this.i18n.numberOperatorIsNotBetween,id:7});a.push({name:this.i18n.numberOperatorIsBlank,name_:this.i18n.numberOperatorIsBlank,id:8});a.push({name:this.i18n.numberOperatorIsNotBlank,name_:this.i18n.numberOperatorIsNotBlank,id:9});this.numberOperatorStore=new v({data:{label:"name",identifier:"id",items:a}})},readCodedValues:function(){q.forEach(this.mapLayer.fields,function(a){a.domain&&a.domain.codedValues&&
(this.fieldDomains[a.name]=a.domain.codedValues)},this)},getDecodedValue:function(a,b){var c,d,h=this.getCodedValues(b);if(h)for(c=0;c<h.length;c+=1)if(d=h[c],d.code===a)return d.name;return a},getCodedValues:function(a){return this.fieldDomains[a]},getFieldsList:function(){return f.byId(this.id+".fieldsList")},getOperatorList:function(){return f.byId(this.id+".operatorList")},getValueFieldsList:function(){return f.byId(this.id+".valueFields")},getAttrValContNode:function(){return l.byId(this.id+
".attributeValueContainer")},getField:function(){var a=this.getFieldsList();return{name:a.store.getValue(a.item,"name"),label:a.store.getValue(a.item,"label"),shortType:a.store.getValue(a.item,"shortType"),type:a.store.getValue(a.item,"type")}},getOperator:function(){var a=this.getOperatorList();return a.item?a.store.getValue(a.item,"name"):""},getValue:function(){return{}},isInteractiveChecked:function(){return this.interactiveCheck.checked},setInteractiveSection:function(a,b,c){this.disableInteractiveHandlers();
this.interactiveCheck.checked=a;this.promptText.attr("value",b);this.hintText.attr("value",c);t.set(this.interactiveSpace,"display","block");this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;";this.enableInteractiveHandlers()},enableInteractiveHandlers:function(){this.onPromptChangeHandler=k.connect(this.promptText,"onChange",this,"onChangeInteractive");this.onHintchangeHandler=k.connect(this.hintText,"onChange",this,"onChangeInteractive")},disableInteractiveHandlers:function(){k.disconnect(this.onPromptChangeHandler);
k.disconnect(this.onHintChangeHandler)},fillFieldsList:function(a){var b=this.getFieldsList();b.set("labelAttr","label");b.set("searchAttr","label");b.set("store",a);b.set("value",0)},fillOperatorList:function(a,b,c){var d=this.getOperatorList();if(d.set("labelAttr","name"),d.set("searchAttr","name"),d.set("query",c?c:{}),d.set("store",a),b){var h=!1;for(c=0;20>c&&(a.fetchItemByIdentity({identity:c,onItem:p.hitch(this,function(a){a&&a.name[0]===b&&(d.set("value",a.id[0]),h=!0)})}),!h);c++);}else d.set("value",
0)},createValueString:function(a){var b=this.getAttrValContNode();if(this.clearAttributeValueDijits(),m.empty(b),a){var b=new x({id:this.id+".value","class":"attributeValue",maxHeight:150,sortByLabel:!0},m.create("div",{},b)),c=this.buildCodedValuesStore(a);b.set("store",c);b.set("value",0)}else b=new O({id:this.id+".value","class":"attributeValue",required:!0,placeHolder:"",intermediateChanges:!0},m.create("div",{},b));this.valueHandlers.push(k.connect(b,"onChange",this,"onValueChange"));this.checkDefaultOption();
this.getValue=function(){var b,c=f.byId(this.id+".value"),e=!0;return a?c.item?b=c.item.code[0]:(b="",e=!1):(b=c.get("value"),e=b),{value:b,isValid:e}}},createValueDate:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();m.empty(a);a=new C({id:this.id+".value","class":"attributeValue",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},m.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(k.connect(a,"onChange",this,"onValueChange"));this.getValue=
function(){var a=f.byId(this.id+".value").get("value");return{value:a,isValid:r.isDefined(a)}}},createValueNumber:function(a){var b=this.getAttrValContNode();if(this.clearAttributeValueDijits(),m.empty(b),a){var b=new x({id:this.id+".value","class":"attributeValue",maxHeight:150,sortByLabel:!0},m.create("div",{},b)),c=this.buildCodedValuesStore(a);b.set("store",c);b.set("value",0)}else b=new D({id:this.id+".value","class":"attributeValue",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},
m.create("div",{},b));this.valueHandlers.push(k.connect(b,"onChange",this,"onValueChange"));this.checkDefaultOption();this.getValue=function(){var b,c=f.byId(this.id+".value"),e=!0;return a?c.item?b=c.item.code[0]:(b="",e=!1):(b=c.get("value"),e=r.isDefined(b)&&!isNaN(b)),{value:b,isValid:e}}},createValueBetweenDate:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();m.empty(a);var b=new C({id:this.id+".value1","class":"attributeValue1",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},
m.create("div",{},a));m.create("span",{innerHTML:this.i18n.andBetweenValues,"class":"attributeBetweenValues"},a);a=new C({id:this.id+".value2","class":"attributeValue2",trim:!0,required:!0,placeHolder:"",constraints:{formatLength:"short"}},m.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(k.connect(b,"onChange",this,"onValueChange"));this.valueHandlers.push(k.connect(a,"onChange",this,"onValueChange"));this.getValue=function(){var a=f.byId(this.id+".value1").get("value"),b=f.byId(this.id+
".value2").get("value");return{value1:a,value2:b,isValid:r.isDefined(a)&&r.isDefined(b)}}},createValueBetweenNumber:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();m.empty(a);var b=new D({id:this.id+".value1","class":"attributeValue1",required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},m.create("div",{},a));m.create("span",{innerHTML:this.i18n.andBetweenValues,"class":"attributeBetweenValues"},a);a=new D({id:this.id+".value2","class":"attributeValue2",
required:!0,placeHolder:"",intermediateChanges:!0,constraints:{pattern:"#####0.##########"}},m.create("div",{},a));this.checkDefaultOption();this.valueHandlers.push(k.connect(b,"onChange",this,"onValueChange"));this.valueHandlers.push(k.connect(a,"onChange",this,"onValueChange"));this.getValue=function(){var a=f.byId(this.id+".value1").get("value"),b=f.byId(this.id+".value2").get("value");return{value1:a,value2:b,isValid:r.isDefined(a)&&r.isDefined(b)&&!isNaN(a)&&!isNaN(b)&&b>=a}}},createValueInTheLastDate:function(){},
createValueIsBlank:function(){var a=this.getAttrValContNode();this.clearAttributeValueDijits();m.empty(a);a.innerHTML="\x3cinput id\x3d'"+this.id+".value' class\x3d'attributeValue' type\x3d'text' disabled\x3d'true'/\x3e";this.checkDefaultOption();this.getValue=function(){return{value:null,isValid:!0}}},createValueFields:function(a,b,c){var d=this.getAttrValContNode();this.clearAttributeValueDijits();m.empty(d);var h=new x({id:this.id+".valueFields","class":"attributeValue",maxHeight:150,labelAttr:"label",
searchAttr:"label",store:a,query:b},m.create("div",{},d));if(c)for(var e=!1,d=0;100>d&&(a.fetchItemByIdentity({identity:d,onItem:p.hitch(this,function(a){a&&a.shortType[0]===b.shortType&&a.name[0]!==c&&(h.set("value",a.id),e=!0)})}),!e);d++);this.valueHandlers.push(k.connect(h,"onChange",this,"onValueChange"));this.getValue=function(){var a=f.byId(this.id+".valueFields");return{value:a.store.getValue(a.item,"name"),label:a.store.getValue(a.item,"label"),type:"field",isValid:!0}}},createValueUnique:function(a){var b=
this.getAttrValContNode();this.clearAttributeValueDijits();m.empty(b);a=new x({id:this.id+".valueUnique","class":"attributeValue",maxHeight:150,store:a},m.create("div",{},b));a.set("value",0);this.valueHandlers.push(k.connect(a,"onChange",this,"onValueChange"));this.getValue=function(){var a=f.byId(this.id+".valueUnique");return{value:a.store.getValue(a.item,"value"),isValid:!0}}},setValue:function(a,b){if(b)for(var c=0;c<b.length;c++){if(a===b[c].code){f.byId(this.id+".value").set("value",c);break}}else"date"===
this.part.fieldObj.shortType?f.byId(this.id+".value").set("value",new Date(a)):("number"===this.part.fieldObj.shortType&&(a=Number(a)),f.byId(this.id+".value").set("value",a))},setValue1:function(a){"date"===this.part.fieldObj.shortType?a=new Date(a):"number"===this.part.fieldObj.shortType&&(a=Number(a));f.byId(this.id+".value1").set("value",a)},setValue2:function(a){"date"===this.part.fieldObj.shortType?a=new Date(a):"number"===this.part.fieldObj.shortType&&(a=Number(a));f.byId(this.id+".value2").set("value",
a)},setValueFieldById:function(a){this.getValueFieldsList().set("value",a)},enableOnFieldChange:function(){this.onFieldChangeEnabled=!0},enableOnOperatorChange:function(){this.onOperatorChangeEnabled=!0},onChangeField:function(){this.onFieldChangeEnabled&&this._onChangeField(this.getFieldsList(),this)},onChangeOperator:function(){this.onOperatorChangeEnabled&&this._onChangeOperator(this.getOperatorList(),this)},onClickDeleteExpression:function(){this._deleteExpression(this)},_onChangeField:function(a,
b,c){var d=b.getOperatorList();switch(this.fieldsStore.getValue(a.item,"type")){case "esriFieldTypeString":var h=null;a=this.fieldsStore.getValue(a.item,"name");if(this.getCodedValues(a))var e=this.i18n.stringOperatorStartsWith,e=e+("|"+this.i18n.stringOperatorEndsWith),e=e+("|"+this.i18n.stringOperatorContains),e=e+("|"+this.i18n.stringOperatorDoesNotContain),h={name_:new RegExp("^(?!("+e+")$)")};d.attr("value")===this.i18n.stringOperatorIs?(b.fillOperatorList(this.stringOperatorStore,this.i18n.stringOperatorIs,
h),this.onChangeOperator(d,b,c)):b.fillOperatorList(this.stringOperatorStore,this.i18n.stringOperatorIs,h);b.createValueString(this.getCodedValues(a));break;case "esriFieldTypeDate":b.fillOperatorList(this.dateOperatorStore,this.i18n.dateOperatorIsOn);b.createValueDate();break;default:h=null,a=this.fieldsStore.getValue(a.item,"name"),this.getCodedValues(a)&&(e=this.i18n.numberOperatorIsBetween,e+="|"+this.i18n.numberOperatorIsNotBetween,e+="|"+this.i18n.numberOperatorIsAtLeast,e+="|"+this.i18n.numberOperatorIsLessThan,
e+="|"+this.i18n.numberOperatorIsAtMost,e+="|"+this.i18n.numberOperatorIsGreaterThan,h={name_:new RegExp("^(?!("+e+")$)")}),d.attr("value")===this.i18n.numberOperatorIs?(b.fillOperatorList(this.numberOperatorStore,this.i18n.numberOperatorIs,h),this.onChangeOperator(d,b,c)):b.fillOperatorList(this.numberOperatorStore,this.i18n.numberOperatorIs,h),b.createValueNumber(this.getCodedValues(a))}"date"===this.fieldsStore.getValue(b.getFieldsList().item,"shortType")?b.disableInteractiveCheck():b.enableInteractiveCheck();
k.publish("filter-expression-change",this)},_onChangeOperator:function(a,b){var c=a.item?a.item.name[0]:a.value,d=this.fieldsStore.getValue(b.getFieldsList().item,"shortType"),h=this.fieldsStore.getValue(b.getFieldsList().item,"name");if(b.enableOptions(),"date"!==d&&"number"!==d||c!==this.i18n.dateOperatorIsBetween&&c!==this.i18n.numberOperatorIsBetween&&c!==this.i18n.dateOperatorIsNotBetween&&c!==this.i18n.numberOperatorIsNotBetween)if("date"!==d||c!==this.i18n.dateOperatorInTheLast&&c!==this.i18n.dateOperatorNotInTheLast)if(c===
this.i18n.stringOperatorIsBlank||c===this.i18n.dateOperatorIsBlank||c===this.i18n.numberOperatorIsBlank||c===this.i18n.stringOperatorIsNotBlank||c===this.i18n.dateOperatorIsNotBlank||c===this.i18n.numberOperatorIsNotBlank)b.createValueIsBlank(),b.disableOptions();else switch(d){case "string":b.createValueString(this.getCodedValues(h));break;case "date":b.createValueDate();break;default:b.createValueNumber(this.getCodedValues(h))}else b.createValueInTheLastDate();else"date"===d?b.createValueBetweenDate():
b.createValueBetweenNumber();k.publish("filter-expression-change",this)},onInteractiveClick:function(){this.isInteractiveChecked()?(t.set(this.interactiveSpace,"display","block"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;"):(t.set(this.interactiveSpace,"display","none"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9660;");k.publish("filter-expression-change",this)},onClickShowHideInteractive:function(){this.interactiveCheck.disabled||("none"===t.set(this.interactiveSpace,"display")?(t.set(this.interactiveSpace,
"display","block"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9650;"):(t.set(this.interactiveSpace,"display","none"),this.interactiveArrow.innerHTML="\x26nbsp;\x26#9660;"))},onChangeInteractive:function(){k.publish("filter-expression-change",this)},showValueInput:function(a){this._showValueInput(f.byNode(a.target),this)},showFields:function(a){this._showFields(f.byNode(a.target),this)},showUniqueList:function(a){this._showUniqueList(f.byNode(a.target),this)},onValueChange:function(){this.onValueChangeHandler&&
clearTimeout(this.onValueChangeHandler);this.onValueChangeHandler=setTimeout(p.hitch(this,function(){this.onValueChangeHandler=null;k.publish("filter-expression-change",this)}),800)},_showValueInput:function(a,b,c){b.onChangeOperator(a,b,c);b.enableInteractiveCheck()},_showFields:function(a,b){var c=b.getFieldsList().item,d=this.fieldsStore.getValue(c,"shortType"),c=this.fieldsStore.getValue(c,"name");b.createValueFields(this.fieldsStore,{shortType:d,name:new RegExp("^(?!"+c+"$)")},c);b.disableInteractiveCheck()},
_showUniqueList:function(a,b){this.uniqueValuesStore&&delete this.uniqueValuesStore;var c=this.fieldsStore.getValue(b.getFieldsList().item,"name");if(10.1<=this.version){var d=null;this.mapLayer.queryServiceUrl?d=this.mapLayer.queryServiceUrl:this.mapLayer.itemLayers&&q.forEach(this.mapLayer.itemLayers,function(a){a.id===this.layerInfo.id&&a.layerUrl&&(d=a.layerUrl)},this);d||(d=this.mapLayer.url);this.uniqueValuesResults[this.mapLayer.id+"_"+c]?this.onGenerateRendererResults(b,a,this.uniqueValuesResults[this.mapLayer.id+
"_"+c]):this.generateRendererUniqueValues(c,d,p.hitch(this,"onGenerateRendererResults",b,a),p.hitch(this,function(){this.showValueInput(a,b)}))}else if(a)return void this.showValueInput(a,b)},onGenerateRendererResults:function(a,b,c){var d=this.fieldsStore.getValue(a.getFieldsList().item,"name"),f=this.fieldsStore.getValue(a.getFieldsList().item,"shortType"),e=this.fieldsStore.getValue(a.getFieldsList().item,"type");this.uniqueValuesResults[this.mapLayer.id+"_"+d]=c;var g=null;q.forEach(this.mapLayer.fields,
function(a){a.name===d&&a.domain&&(g=a.domain)});c=q.filter(c,function(a){return"string"===f?"\x3cNull\x3e"!==a&&""!==a.trim():"\x3cNull\x3e"!==a&&""!==a});if(!c.length)return void this.showValueInput(b,a);"date"===f?(c=q.map(c,function(a){return new Date(a)}),c=c.sort(function(a,b){var c=a.getTime(),d=b.getTime();return d>c?-1:c>d?1:0}),c=q.map(c,function(a){return this.formatFriendlyDate(a)},this)):"number"===f?(c=q.map(c,function(a){return"esriFieldTypeDouble"===e||"esriFieldTypeSingle"===e?parseFloat(a):
parseInt(a,10)}),c=c.sort(function(a,b){return b>a?-1:a>b?1:0})):c=c.sort(function(a,b){return b>a?-1:a>b?1:0});b=q.map(c,function(a,b){var c=a;if("string"===f&&(c=""===a?"\x3c"+this.i18n.emptyString+"\x3e":a),g&&g.codedValues){for(var d=0;d<g.codedValues.length;d++){var k=g.codedValues[d];if(a===k.code)return{id:b,name:k.name||c,value:a}}return{id:b,name:""+c,value:a}}return("esriFieldTypeDouble"===e||"esriFieldTypeSingle"===e)&&(c=w.format(a,{pattern:"#####0.##########"})),{id:b,name:""+c,value:a}},
this);this.uniqueValuesStore=new v({data:{label:"name",identifier:"id",items:b}});a.createValueUnique(this.uniqueValuesStore)},generateRendererUniqueValues:function(a,b,c,d){a instanceof Array&&(a=a.toString());var f=new P;f.attributeField=a;a=new Q;a.classificationDefinition=f;var e,g;this.mapLayer instanceof S?e=new z(this.mapLayer):this.mapLayer instanceof R&&!this.mapLayer.url?e=new z(this.mapLayer):this.hasDynamicLayers(this.mapLayer)?(g=this.mapLayer.layerDefinitions&&this.mapLayer.layerDefinitions[this.mapLayer.id]?
this.mapLayer.layerDefinitions[this.mapLayer.id]:null,a.where=g?g:null,e=new z(this.mapLayer.url+"/dynamicLayer",{source:this.layerInfo.source})):(g=this.mapLayer.getDefinitionExpression(),a.where=g?g:null,e=new z(b));y.config.defaults.io.timeout=1E4;e.execute(a,function(a){y.config.defaults.io.timeout=6E4;a=q.map(a.infos,function(a){return a.value});c(a)},p.hitch(this,function(){y.config.defaults.io.timeout=6E4;d()}))},hasDynamicLayers:function(a){return a&&a.supportsDynamicLayers?!0:!1},formatDate:function(a){return u.format(a,
{datePattern:"yyyy-MM-dd",selector:"date"})+" "+u.format(a,{selector:"time",timePattern:"HH:mm:ss"})},formatFriendlyDate:function(a){return u.format(a,{formatLength:"short",selector:"date"})},parseFriendlyDate:function(a){return u.parse(a,{formatLength:"short",selector:"date"})},parseDate:function(a){var b=u.parse(a,{datePattern:"yyyy-MM-dd",timePattern:"HH:mm:ss"});return b||(b=u.parse(a.replace(" ",", "),{datePattern:"yyyy-MM-dd",timePattern:"HH:mm:ss"}),b||(b=u.parse(a.replace(" "," - "),{datePattern:"yyyy-MM-dd",
timePattern:"HH:mm:ss"}))),b},addDay:function(a){return new Date(a.getTime()+this.dayInMS)},subtractDay:function(a){return new Date(a.getTime()-this.dayInMS)},containsNonLatinCharacter:function(a){for(var b=0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1},buildCodedValuesStore:function(a){a=q.map(a,function(a,c){return{name:a.name,code:a.code,id:c}});return new v({data:{label:"name",identifier:"id",items:a}})},clearAttributeValueDijits:function(){this.valueHandlers&&0!==this.valueHandlers.length&&
(q.forEach(this.valueHandlers,p.hitch(this,function(a){k.disconnect(a)})),this.valueHandlers=[],f.byId(this.id+".value")?f.byId(this.id+".value").destroy():l.byId(this.id+".value")&&this.getAttrValContNode().removeChild(l.byId(this.id+".value")),f.byId(this.id+".value1")?f.byId(this.id+".value1").destroy():l.byId(this.id+".value1")&&this.getAttrValContNode().removeChild(l.byId(this.id+".value1")),f.byId(this.id+".value2")?f.byId(this.id+".value2").destroy():l.byId(this.id+".value2")&&this.getAttrValContNode().removeChild(l.byId(this.id+
".value2")),f.byId(this.id+".valueFields")&&f.byId(this.id+".valueFields").destroy(),f.byId(this.id+".valueUnique")&&f.byId(this.id+".valueUnique").destroy())},checkDefaultOption:function(){B(".attributeValueOptions .attributeValueRadio",this.domNode).forEach(function(a){f.byNode(a).set("checked",-1<a.className.indexOf("radioValue"))})},disableOptions:function(){B(".attributeValueOptions .attributeValueRadio",this.domNode).forEach(function(a){f.byNode(a).set("disabled",!0)})},enableOptions:function(){B(".attributeValueOptions .attributeValueRadio",
this.domNode).forEach(function(a){f.byNode(a).set("disabled",!1)})},checkFieldOption:function(){f.byId(this.id+".radioFields").set("checked",!0)},disableFieldOption:function(){f.byId(this.id+".radioFields").set("disabled",!0)},disableUniqueOption:function(){f.byId(this.id+".radioUnique").set("disabled",!0)},enableInteractiveCheck:function(){this.interactiveCheck.disabled=!1},disableInteractiveCheck:function(){this.interactiveCheck.checked=!1;this.interactiveCheck.disabled=!0},isHostedService:function(a){if(!a)return!1;
var b=-1!==a.indexOf(".arcgis.com/");a=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features");return b&&a},buildEditUIField:function(a,b,c){this.getFieldItemByName({name:a.fieldObj.name},p.hitch(this,function(d){b.getFieldsList().set("value",d.id[0]);this.buildEditUIOperator(a,b,c)}),p.hitch(this,function(){b.getFieldsList().set("value",0);this.buildEditUIOperator(a,b,c)}))},buildEditUIOperator:function(a,b,c){switch(a.fieldObj.shortType){case "string":b.fillOperatorList(this.stringOperatorStore,
a.operator);break;case "date":b.fillOperatorList(this.dateOperatorStore,a.operator);break;default:b.fillOperatorList(this.numberOperatorStore,a.operator)}this.getOperatorItemByName(b.getOperatorList().store,{name:a.operator},p.hitch(this,function(d){b.getOperatorList().set("value",d.id[0]);this.buildEditUIValue(a,b,c)}),p.hitch(this,function(){b.getOperatorList().set("value",0);this.buildEditUIValue(a,b,c)}))},buildEditUIValue:function(a,b){var c=a.operator;this.onChangeOperator(b.getOperatorList(),
b);b.enableOptions();c===this.i18n.stringOperatorIsBlank||c===this.i18n.dateOperatorIsBlank||c===this.i18n.numberOperatorIsBlank||c===this.i18n.stringOperatorIsNotBlank||c===this.i18n.dateOperatorIsNotBlank||c===this.i18n.numberOperatorIsNotBlank?(b.createValueIsBlank(),b.disableOptions()):"field"===a.valueObj.type?(b.createValueFields(this.fieldsStore,{shortType:a.fieldObj.shortType,name:new RegExp("^(?!"+a.fieldObj.name+"$)")}),b.checkFieldOption(),this.getFieldItemByName({name:a.valueObj.value},
p.hitch(this,function(a){b.setValueFieldById(a.id[0])}),p.hitch(this,function(){b.setValueFieldById(0)}))):r.isDefined(a.valueObj.value1)?(b.setValue1(a.valueObj.value1),b.setValue2(a.valueObj.value2)):b.setValue(a.valueObj.value,this.getCodedValues(a.fieldObj.name))},getFieldItemByName:function(a,b,c){this.fieldsStore.fetch({query:a,onComplete:p.hitch(this,function(a){a&&a.length?b(a[0]):c()})})},getOperatorItemByName:function(a,b,c,d){a.fetch({query:b,onComplete:p.hitch(this,function(a){a&&a.length?
c(a[0]):d()})})}});return F("extend-esri")&&p.setObject("esri.dijit.SingleFilter",A,y),A});