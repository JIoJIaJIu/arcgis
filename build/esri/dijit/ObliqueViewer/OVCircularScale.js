//>>built
define("esri/dijit/ObliqueViewer/OVCircularScale",["dojo/_base/declare","dojox/dgauges/CircularScale","dojox/gfx"],function(v,w,q){var x=Math.PI/180;return v([w],{_layoutLabel:function(u,c,f,g,m,d,h){var b=this._getFont();c=q._base._getTextBox(c,{font:q.makeFontString(q.makeParameters(q.defaultFont,b))}).w;b=q.normalizedLength(b.size);this.azimuthAngle=this.azimuthAngle||0;var a,t=this.azimuthAngle*x,k=f+Math.cos(d)*m-c/2,l=g-Math.sin(d)*m-b/2,n=[],e=a=k;a=-Math.tan(d)*a+g+Math.tan(d)*f;a>=l&&l+b>=
a&&n.push({x:e,y:a});e=a=k+c;a=-Math.tan(d)*a+g+Math.tan(d)*f;a>=l&&l+b>=a&&n.push({x:e,y:a});a=l;e=-1/Math.tan(d)*a+f+1/Math.tan(d)*g;e>=k&&k+c>=e&&n.push({x:e,y:a});a=l+b;e=-1/Math.tan(d)*a+f+1/Math.tan(d)*g;e>=k&&k+c>=e&&n.push({x:e,y:a});var p;if("inside"==h)for(h=0;h<n.length;h++){var r=n[h];if(p=this._distance(r.x,r.y,f,g)-m,0<=p){k=f+Math.cos(d)*(m-p)-c/2;l=g-Math.sin(d)*(m-p)-b/2;break}}else for(h=0;h<n.length;h++)if(r=n[h],p=this._distance(r.x,r.y,f,g)-m,0>=p){k=f+Math.cos(d)*(m-p)-c/2;l=
g-Math.sin(d)*(m-p)-b/2;break}315<this.azimuthAngle&&360>=this.azimuthAngle||0<=this.azimuthAngle&&45>=this.azimuthAngle?c/=2:45<this.azimuthAngle&&135>=this.azimuthAngle?(c=0,b/=2):135<this.azimuthAngle&&225>=this.azimuthAngle?(c/=2,b=0):b/=2;u&&u.setTransform([{dx:k+c,dy:l+b,xx:Math.cos(t),xy:-Math.sin(t),yx:Math.sin(t),yy:Math.cos(t)}])}})});