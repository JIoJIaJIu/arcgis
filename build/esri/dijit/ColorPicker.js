//>>built
require({cache:{"url:esri/dijit/ColorPicker/templates/ColorPicker.html":'\x3cdiv class\x3d"${css.container}"\x3e\n  \x3cdiv class\x3d"${css.header}" data-dojo-attach-point\x3d"dap_header"\x3e\n    \x3cspan class\x3d"${css.swatchPreview} ${css.container}"\x3e\n      \x3cspan class\x3d"${css.swatch} ${css.swatchTransparencyBackground}"\x3e\x3c/span\x3e\n      \x3cspan data-dojo-attach-point\x3d"dap_previewSwatch" class\x3d"${css.swatch}"\x3e\x3c/span\x3e\n    \x3c/span\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"${css.middle}"\x3e\n    \x3cdiv data-dojo-attach-point\x3d"dap_paletteContainer" class\x3d"${css.palette} ${css.container}"\x3e\n      \x3cdiv data-dojo-attach-point\x3d"dap_primaryPalette" class\x3d"${css.palette}"\x3e\x3c/div\x3e\x3c!--\n      --\x3e\x3cdiv data-dojo-attach-point\x3d"dap_secondaryPalette" class\x3d"${css.palette}"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"${css.paletteOptions}"\x3e\n      \x3cinput type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"dap_hexInput" class\x3d"${css.hexInput}"/\x3e\n      \x3cinput class\x3d"${css.paletteToggle}" type\x3d"button" data-dojo-type\x3d"dijit/form/ToggleButton" data-dojo-attach-point\x3d"dap_paletteToggle" label\x3d"${labels.more}"/\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n  \x3cdiv class\x3d"${css.footer}" data-dojo-attach-point\x3d"dap_footer"\x3e\n    \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_suggestedColorSection"\x3e\n      \x3cdiv class\x3d"${css.label}"\x3e${labels.suggested}\x3c/div\x3e\n      \x3cdiv data-dojo-attach-point\x3d"dap_suggestedColorPalette" class\x3d"${css.suggested} ${css.palette} ${css.swatchRow}"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_recentColorSection"\x3e\n      \x3cdiv class\x3d"${css.label}"\x3e${labels.recent}\x3c/div\x3e\n      \x3cdiv data-dojo-attach-point\x3d"dap_recentColorPalette" class\x3d"${css.recent} ${css.palette} ${css.swatchRow}"\x3e\x3c/div\x3e\n    \x3c/div\x3e\n    \x3cdiv class\x3d"${css.section}" data-dojo-attach-point\x3d"dap_transparencySection"\x3e\n      \x3cdiv data-dojo-attach-point\x3d"dap_transparencyLabel" class\x3d"${css.label}"\x3e${labels.transparency}\x3c/div\x3e\n      \x3cdiv class\x3d"${css.transparencySlider}"\n           data-dojo-attach-point\x3d"dap_transparencySlider"\n           data-dojo-type\x3d"esri/dijit/HorizontalSlider"\n           data-dojo-props\x3d"minimum: 0, maximum: 1, discreteValues: 100, labels: [\'0%\', \'50%\', \'100%\']"\x3e\n      \x3c/div\x3e\n    \x3c/div\x3e\n  \x3c/div\x3e\n\x3c/div\x3e\n'}});
define("esri/dijit/ColorPicker","../Color ../kernel ./_EventedWidget ./_Tooltip ./ColorPicker/colorUtil ./ColorPicker/HexPalette dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/query dojo/sniff dojo/dom-style dojo/i18n!../nls/jsapi dojo/text!./ColorPicker/templates/ColorPicker.html ./HorizontalSlider dijit/form/RadioButton dijit/form/TextBox dijit/form/ToggleButton dojo/NodeList-dom".split(" "),
function(n,w,p,x,e,u,y,z,f,A,d,h,k,l,r,v,m,B,C){p=A("esri.dijit.ColorPicker",[p,y,z,x],{_DEFAULT_COLORS_PER_ROW:13,templateString:C,labels:B.widgets.colorPicker,baseClass:"esriColorPicker",css:{container:"esriContainer",header:"esriHeader",footer:"esriFooter",middle:"esriMiddle",swatch:"esriSwatch",swatchRow:"esriSwatchRow",swatchEmpty:"esriSwatchEmpty",swatchPreview:"esriSwatchPreview",swatchTransparencyBackground:"esriSwatchTransparencyBackground",palette:"esriPalette",paletteOptions:"esriPaletteOptions",
paletteToggle:"esriPaletteToggle",label:"esriLabel",hexInput:"esriHexInput",recent:"esriRecent",suggested:"esriSuggested",selected:"esriSelected",disabled:"esriDisabled",section:"esriSection",displayNone:"esriDisplayNone",transparencySlider:"esriTransparencySlider",alt:"esriAlt"},color:null,trackColors:!0,_required:!1,_activePalette:null,recentColors:[],_showRecentColors:!0,_showTransparencySlider:!0,colorsPerRow:void 0,_brightsPalette:null,_pastelsPalette:null,_swatches:null,_colorInstance:null,
_swatchCreator:null,_noColorSwatchNode:null,constructor:function(a){a=a||{};this._colorInstance=new n;this._brightsPalette=new u({colors:a.palette});this._pastelsPalette=new u({colors:this._toPastels(this._brightsPalette.get("colors"))});this._activePalette=this._brightsPalette;this._swatchCreator=a.swatchCreator||this._createSwatch;a.hasOwnProperty("required")&&(this._required=a.required);a.hasOwnProperty("showRecentColors")&&(this._showRecentColors=a.showRecentColors);a.hasOwnProperty("showSuggestedColors")&&
(this._showSuggestedColors=a.showSuggestedColors);a.hasOwnProperty("showTransparencySlider")&&(this._showTransparencySlider=a.showTransparencySlider);a.color&&(a.color=e.normalizeColor(a.color));this.colorsPerRow=0<a.colorsPerRow?a.colorsPerRow:this._DEFAULT_COLORS_PER_ROW;this._swatches={}},_toPastels:function(a){var b=this._colorInstance,c=new n([238,238,238]);return f.map(a,function(a){return n.blendColors(b.setColor(a),c,.2)},this)},_createSwatch:function(a){return k.create("span",{className:a.className,
style:{background:a.hexColor||"transparent"}},a.paletteNode)},_createSwatches:function(a,b){var c,q,g=this.css.swatch,e=this.css.swatchRow,h=this.colorsPerRow,d=b.get("colors");f.forEach(d,function(b,d){0===d%h&&(c=k.create("div",{className:e},a));q=this._swatchCreator({className:g,hexColor:b,paletteNode:c});this._swatches[b]=q},this)},_selectColor:function(){var a=this.color||this._activePalette.get("colors")[0];this.set("color",a)},_setColorWithCurrentAlpha:function(a){"no-color"!==a&&"no-color"!==
this.color&&(a=e.normalizeColor(a),a.a=this.color.a);this.set("color",a)},_updatePreviewSwatch:function(a){var b,c,q,g,t,d=this.css.swatchEmpty,f=this.dap_previewSwatch;return"no-color"===a?(h.add(f,d),void m.set(f,{backgroundColor:"",borderColor:""})):(b=e.getContrastingColor(a),c=8!==v("ie"),h.remove(f,d),q=a.toCss(c),g=b.toCss(c),t={backgroundColor:q,borderColor:g},c||(t.opacity=a.a),void m.set(f,t))},_showBrights:function(){h.remove(this.dap_paletteContainer,this.css.alt);this._activePalette=
this._brightsPalette},_showPastels:function(){h.add(this.dap_paletteContainer,this.css.alt);this._activePalette=this._pastelsPalette},_setColorFromSwatch:function(a){a=m.get(a,"backgroundColor");this._setColorWithCurrentAlpha(a)},_checkSelection:function(){var a=this.get("color");this._activePalette.contains(a)?this._highlightColor(a):this._clearSelection()},_addListeners:function(){var a="."+this.css.swatch;"."+this.css.swatchEmpty;this.own(l(this.dap_paletteContainer,l.selector(a,"click"),d.hitch(this,
function(a){this._setColorFromSwatch(a.target)})));this.own(l(this.dap_recentColorPalette,l.selector(a,"click"),d.hitch(this,function(a){this._setColorFromSwatch(a.target)})));this.own(l(this.dap_suggestedColorPalette,l.selector(a,"click"),d.hitch(this,function(a){this._setColorFromSwatch(a.target)})));this._required||this.own(l(this._noColorSwatchNode,"click",d.hitch(this,function(){this.set("color","no-color")})));var b=this.dap_hexInput;b.on("blur",d.hitch(this,function(){var a=e.normalizeHex(b.get("value"));
return e.isShorthandHex(a)?void this._setColorWithCurrentAlpha(a):void this._silentlyUpdateHexInput(this.color)}));b.on("change",d.hitch(this,function(){var a=e.normalizeHex(b.get("value"));e.isLonghandHex(a)&&this.color.toHex()!==a&&this._setColorWithCurrentAlpha(a)}));this.dap_transparencySlider.on("change",d.hitch(this,function(a){var b,g=this.get("color");"no-color"!==g&&(b=e.normalizeColor(this._colorInstance.setColor(g)),b.a=1-a,this._updatePreviewSwatch(b),this._silentlyUpdateHexInput(b),this.set("color",
b))}));this.dap_paletteToggle.on("change",d.hitch(this,this._togglePalette))},_togglePalette:function(a){this.dap_paletteToggle.set("checked",a,!1);a?this._showPastels():this._showBrights();this._checkSelection()},postCreate:function(){this.inherited(arguments);this._addListeners();this._selectColor();this.dap_hexInput.intermediateChanges=!0;this.dap_transparencySlider.intermediateChanges=!0;this.createTooltips([{node:this.dap_paletteContainer,label:this.labels.paletteTooltip},{node:this.dap_hexInput,
label:this.labels.hexInputTooltip},{node:this._noColorSwatchNode,label:this.labels.noColorTooltip},{node:this.dap_paletteToggle,label:this.labels.moreColorsTooltip}])},buildRendering:function(){this.inherited(arguments);this._createPalettes();var a=this.css.swatch,b=this.css.swatchEmpty;this._required||(this._noColorSwatchNode=k.create("div",{className:a+" "+b},this.dap_hexInput.domNode,"after"));a=this.css.displayNone;this._showTransparencySlider||h.add(this.dap_transparencySection,a);this._showRecentColors||
h.add(this.dap_recentColorSection,a);this._showSuggestedColors||h.add(this.dap_suggestedColorSection,a)},_createPalettes:function(){this._swatches={};k.empty(this.dap_primaryPalette);k.empty(this.dap_secondaryPalette);this._createSwatches(this.dap_primaryPalette,this._brightsPalette);this._createSwatches(this.dap_secondaryPalette,this._pastelsPalette)},_silentlyUpdateHexInput:function(a){a="no-color"===a?"":a.toHex();this._silentlyUpdateIntermediateChangingValueWidget(this.dap_hexInput,a)},_silentlyUpdateIntermediateChangingValueWidget:function(a,
b){a.intermediateChanges=!1;a.set("value",b,!1);a.intermediateChanges=!0},addRecentColor:function(a){a&&"no-color"!==a&&this._addRecentColor(e.normalizeColor(a).toHex())},_addRecentColor:function(a){if(a){var b=this.recentColors,c=f.indexOf(b,a);-1<c&&b.splice(c,1);b.unshift(a);b.length>this.colorsPerRow&&b.pop();this._renderRecentSwatches()}},_renderRecentSwatches:function(){if(this.recentColors){var a=this.css.recent,b=this.css.swatch,c=r("."+a+"."+b,this.dap_recentColorPalette);f.forEach(this.recentColors,
function(e,g){if(g<this.colorsPerRow){if(g+1>c.length){var d=this._swatchCreator({hexColor:e,className:b+" "+a,paletteNode:this.dap_recentColorPalette});c.push(d)}m.set(c[g],"backgroundColor",e)}},this)}},_renderSuggestedSwatches:function(){if(this.suggestedColors){var a=this.css.suggested,b=this.css.swatch,c=r("."+a+"."+b,this.dap_recentColorPalette);f.forEach(this.suggestedColors,function(e,g){if(g<this.colorsPerRow){if(g+1>c.length){var d=this._swatchCreator({hexColor:e,className:b+" "+a,paletteNode:this.dap_suggestedColorPalette});
c.push(d)}m.set(c[g],"backgroundColor",e)}},this)}},_clearRecentSwatches:function(){k.empty(this.dap_recentColorPalette)},_clearSuggestedSwatches:function(){k.empty(this.dap_suggestedColorPalette)},_clearSelection:function(){var a=this.css.selected;r("."+a,this.dap_paletteContainer).removeClass(a)},_highlightColor:function(a){var b,c=this.css.selected,d=this._findColorSwatch(a);d&&(a=e.normalizeColor(a),b=e.getContrastingColor(a),h.add(d,c),m.set(d,"borderColor",b.toHex()))},_findColorSwatch:function(a){var b,
c=this._activePalette.get("colors");a=this._colorInstance.setColor(a).toHex();return-1<f.indexOf(c,a)&&(b=this._swatches[a]),b},_getColorAttr:function(){return"no-color"===this.color?"no-color":new n(this.color)},_previousColor:null,_enableTransparencySlider:function(){h.remove(this.dap_transparencyLabel,this.css.disabled);this.dap_transparencySlider.set("disabled",!1)},_disableTransparencySlider:function(){h.add(this.dap_transparencyLabel,this.css.disabled);this.dap_transparencySlider.set("disabled",
!0)},_setColorAttr:function(a,b){if(a=a||"no-color",b=b||void 0===b,!this._required){if("no-color"===a)return this._set("color","no-color"),this._previousColor="no-color",this._disableTransparencySlider(),this._clearSelection(),this._silentlyUpdateHexInput("no-color"),this._updatePreviewSwatch(a),h.add(this._noColorSwatchNode,this.css.selected),void(b&&this.emit("color-change",{color:"no-color"}));this._enableTransparencySlider();h.remove(this._noColorSwatchNode,this.css.selected)}var c,d=e.normalizeColor(a),
g=this._previousColor,f=this._colorInstance;c=this.css.selected;if(g){if(e.equal(g,d))return;(g=this._findColorSwatch(g))&&(h.remove(g,c),m.set(g,"borderColor",""))}f.setColor(d);c=f.toHex();this._set("color",new n(f));this._previousColor=d;this._silentlyUpdateIntermediateChangingValueWidget(this.dap_transparencySlider,1-f.a);this._updatePreviewSwatch(f);this._checkSelection();this._silentlyUpdateHexInput(f);this.trackColors&&this._addRecentColor(c);b&&this.emit("color-change",{color:new n(f)})},
_getRecentColorsAttr:function(){return f.map(this.recentColors,function(a){return e.normalizeColor(a)})},_setRecentColorsAttr:function(a){this.recentColors=a||[];this._showRecentColors&&(this.recentColors=f.map(this.recentColors,function(a){return e.normalizeColor(a).toHex()}));0===this.recentColors.length?this._clearRecentSwatches():this._renderRecentSwatches()},suggestedColors:null,_getSuggestedColorsAttr:function(){return f.map(this.suggestedColors,function(a){return e.normalizeColor(a)})},_setSuggestedColorsAttr:function(a){this._showSuggestedColors&&
(this._clearSuggestedSwatches(),this.suggestedColors=a||[],this.suggestedColors=f.map(this.suggestedColors,function(a){return e.normalizeColor(a).toHex()}),0<this.suggestedColors.length&&this._renderSuggestedSwatches())},_setPaletteAttr:function(a){var b=this._activePalette===this._brightsPalette;this._brightsPalette.set("colors",a);this._pastelsPalette.set("colors",this._toPastels(this._brightsPalette.get("colors")));this._activePalette=b?this._brightsPalette:this._pastelsPalette;this._createPalettes();
this._togglePalette(!b)},saveRecentColors:function(a){localStorage.setItem(a,JSON.stringify(this.get("recentColors")))},loadRecentColors:function(a){this.set("recentColors",JSON.parse(localStorage.getItem(a)))}});return p.NO_COLOR="no-color",v("extend-esri")&&d.setObject("dijit.ColorPicker",p,w),p});