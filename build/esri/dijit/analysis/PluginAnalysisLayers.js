//>>built
define("esri/dijit/analysis/PluginAnalysisLayers","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/promise/all dojo/has ../../kernel".split(" "),function(f,d,g,l,h,k){var e=f(null,{constructor:function(a){d.mixin(this,a)},fetchData:function(){this._portal=this.parent._portal;var a;return this._fetchGroups().then(d.hitch(this,function(b){return a=g.map(b||[],function(a){return a?'group:"'+a.id+'"':void 0}).join(" OR "),this._fetchGroupItems(a)}))},_fetchGroup:function(a,b){return this._groups=
this._groups||[],this._groups[a]||this._portal.queryGroups(b,!0).then(d.hitch(this,function(c){return 0<c.total&&c.results&&(this._groups[a]=c.results),this._groups[a]||[]}))},_fetchGroupItems:function(a,b){var c='(type:"Map Service" OR type:"Feature Service") typekeywords:"Analysis Ready" ('+a+")"+(b?" "+b:"");return this._portal.user.demographics||(c+=' -typekeywords:"Requires Credits"'),this.parent._fetchItems(c)},_fetchGroups:function(){return this._fetchEsriAnalysisLayers()},_fetchEsriAnalysisLayers:function(){var a,
b;return this._portal&&this._portal.livingAtlasGroupQuery&&(a=this._portal.livingAtlasGroupQuery.replace('title:"Featured Maps And Apps"','title:"Living Atlas Analysis Layers"')),b={q:a,num:100,start:0},this._fetchGroup("esriAnalysisLayers",b).then(d.hitch(this,function(a){return a}))}});return d.mixin(e,{add:function(a,b){if(!a.plugIn){var c=b||{};c.parent=a;a.plugIn=new e(c)}},remove:function(a){a.plugIn&&(a.plugIn.destroy(),delete a.plugIn)}}),h("extend-esri")&&d.setObject("dijit.analysis.PluginAnalysisLayers",
e,k),e});