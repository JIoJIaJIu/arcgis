//>>built
define("esri/lang","dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(l,w,x,g,y,z,A,B,p){function t(b,c,a){return[g.isString(b)?b.split(""):b,c||x.global,g.isString(a)?new Function("item","index","array",a):a]}function m(b){return void 0!==b&&null!==b}function q(b){return m(b)?b:""}function n(b,c,a){var d,e=a.match(/([^\(]+)(\([^\)]+\))?/i),f=g.trim(e[1]);a=c[b];var e=w.fromJson((e[2]?g.trim(e[2]):"()").replace(/^\(/,
"({").replace(/\)$/,"})")),h=e.utcOffset;if(-1===l.indexOf(C,f))d=g.getObject(f),g.isFunction(d)&&(a=d(a,b,c,e));else if("number"==typeof a||"string"==typeof a&&a&&!isNaN(Number(a)))switch(a=Number(a),f){case "NumberFormat":return A.format(a,e);case "DateString":return d=new Date(a),e.local||e.systemLocale?e.systemLocale?d.toLocaleDateString()+(e.hideTime?"":" "+d.toLocaleTimeString()):d.toDateString()+(e.hideTime?"":" "+d.toTimeString()):(d=d.toUTCString(),e.hideTime&&(d=d.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,
"")),d);case "DateFormat":return d=new Date(a),m(h)&&(d=y.add(d,"minute",d.getTimezoneOffset()-h)),B.format(d,e)}return q(a)}function r(b,c){var a;if(c)for(a in b)b.hasOwnProperty(a)&&(void 0===b[a]?delete b[a]:b[a]instanceof Object&&r(b[a],!0));else for(a in b)b.hasOwnProperty(a)&&void 0===b[a]&&delete b[a];return b}var C=["NumberFormat","DateString","DateFormat"],u=/<\/?[^>]+>/g,v={valueOf:function(b,c){for(var a in b)if(b[a]==c)return a;return null},stripTags:function(b){if(b){var c=typeof b;if("string"===
c)b=b.replace(u,"");else if("object"===c)for(var a in b)(c=b[a])&&"string"==typeof c&&(c=c.replace(u,"")),b[a]=c}return b},substitute:function(b,c,a){var d,e,f;if(m(a)&&(g.isObject(a)?(d=a.first,e=a.dateFormat,f=a.numberFormat):d=a),c&&"${*}"!==c)return g.replace(c,g.hitch({obj:b},function(b,a){var c=a.split(":");return 1<c.length?(a=c[0],c.shift(),n(a,this.obj,c.join(":"))):e&&-1!==l.indexOf(e.properties||"",a)?n(a,this.obj,e.formatter||"DateString"):f&&-1!==l.indexOf(f.properties||"",a)?n(a,this.obj,
f.formatter||"NumberFormat"):q(this.obj[a])}),/\$\{([^\}]+)\}/g);var h,k;c=[];for(k in b)if(h=b[k],e&&-1!==l.indexOf(e.properties||"",k)?h=n(k,b,e.formatter||"DateString"):f&&-1!==l.indexOf(f.properties||"",k)&&(h=n(k,b,f.formatter||"NumberFormat")),c.push(k+" \x3d "+q(h)+"\x3cbr/\x3e"),d)break;return c.join("")},filter:function(b,c,a){var d;c=t(b,a,c);a={};b=c[0];for(d in b)c[2].call(c[d],b[d],d,b)&&(a[d]=b[d]);return a},isDefined:m,fixJson:r};return z("extend-esri")&&(g.mixin(p,v),p._isDefined=
m,p._getParts=t,p._sanitize=r),v});