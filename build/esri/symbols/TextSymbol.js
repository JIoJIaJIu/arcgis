//>>built
define("esri/symbols/TextSymbol","dojo/_base/declare dojo/_base/lang dojo/has dojox/gfx/_base ../kernel ../lang ../Color ./Symbol ./Font".split(" "),function(c,e,p,d,m,n,g,q,h){var k={type:"textsymbol",x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:d.defaultFont,angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},r={start:"left",middle:"center",end:"right"},t={left:"start",center:"middle",right:"end",justify:"start"},u={top:"text-before-edge",middle:"central",baseline:"alphabetic",
bottom:"text-after-edge"},l=document.createElement("canvas");c=c(q,{declaredClass:"esri.symbol.TextSymbol",angle:0,xoffset:0,yoffset:0,constructor:function(a,b,f){e.mixin(this,k);this.font=new h(this.font);this.color=new g(this.color);a&&(e.isObject(a)?(e.mixin(this,a),this.color&&n.isDefined(this.color[0])&&(this.color=g.toDojoColor(this.color)),this.type="textsymbol",this.font=new h(this.font),this.xoffset=d.pt2px(this.xoffset),this.yoffset=d.pt2px(this.yoffset),this.angle&&(this.angle*=-1),this.haloSize&&
(this.haloSize=d.pt2px(this.haloSize)),this.haloColor&&(this.haloColor=g.toDojoColor(this.haloColor))):(this.text=a,b&&(this.font=b),f&&(this.color=f)));this.setAlign(this.align||this.getSVGAlign())},setFont:function(a){return this.font=a,this},setSize:function(a){return this.font.size=a,this},setAngle:function(a){return this.angle=a,this},setOffset:function(a,b){return this.xoffset=a,this.yoffset=b,this},setHaloColor:function(a){return this.haloColor=a,this},setHaloSize:function(a){return this.haloSize=
a,this},setAlign:function(a){return this.align=a,this.setHorizontalAlignment(a&&r[a.toLowerCase()]||"center"),this},setHorizontalAlignment:function(a){return this.horizontalAlignment=a,this},getSVGAlign:function(){var a=this.horizontalAlignment;return a&&t[a.toLowerCase()]||"middle"},setVerticalAlignment:function(a){return this.verticalAlignment=a,this},getSVGBaseline:function(){var a=this.verticalAlignment;return a&&u[a.toLowerCase()]||"alphabetic"},getSVGBaselineShift:function(){return"bottom"===
this.verticalAlignment?"super":null},setDecoration:function(a){return this.decoration=a,this.font||this.setFont(new h),this.font.setDecoration(a),this},setRotated:function(a){return this.rotated=a,this},setKerning:function(a){return this.kerning=a,this},setText:function(a){return this.text=a,this},getStroke:function(){return null},getFill:function(){return this.color},getWidth:function(){var a=l&&l.getContext&&l.getContext("2d");if(a){var b=this.font;return a.font=(b.style?b.style:d.defaultFont.style)+
" "+(b.weight?b.weight:d.defaultFont.weight)+" "+(b.size?b.size:d.defaultFont.size)+"px "+(b.family?b.family:d.defaultFont.family),a.measureText(this.text).width}for(var f=this.getHeight(),c=0,a=0;a<this.text.length;a++)b=this.text.charAt(a),c+=b==b.toUpperCase()?.7*f:.5*f;return c},getHeight:function(){return d.normalizedLength(this.font.size)},getShapeDescriptors:function(){var a,b=this.font;return b&&(a={},b.size&&(a.size=b.size),b.style&&(a.style=b.style),b.variant&&(a.variant=b.variant),b.decoration&&
(a.decoration=b.decoration),b.weight&&(a.weight=b.weight),b.family&&(a.family=b.family)),{defaultShape:{type:"text",text:this.text,x:0,y:this.getHeight()/4,align:"middle",decoration:this.decoration||b&&b.decoration,rotated:this.rotated,kerning:this.kerning},font:a,fill:this.getFill(),stroke:this.getStroke()}},toJson:function(){var a=d.px2pt(this.xoffset),b=d.px2pt(this.yoffset),c=d.px2pt(this.haloSize);return a=isNaN(a)?void 0:a,b=isNaN(b)?void 0:b,c=isNaN(c)?void 0:c,n.fixJson(e.mixin(this.inherited("toJson",
arguments),{type:"esriTS",backgroundColor:this.backgroundColor,borderLineColor:this.borderLineColor,borderLineSize:this.borderLineSize,haloSize:c,haloColor:this.haloColor&&g.toJsonColor(this.haloColor),verticalAlignment:this.verticalAlignment,horizontalAlignment:this.horizontalAlignment,rightToLeft:this.rightToLeft,width:this.width,angle:this.angle&&-1*this.angle,xoffset:a,yoffset:b,text:this.text,rotated:this.rotated,kerning:this.kerning,font:this.font.toJson()}))}});return e.mixin(c,{ALIGN_START:"start",
ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"}),c.defaultProps=k,p("extend-esri")&&(e.setObject("symbol.TextSymbol",c,m),m.symbol.defaultTextSymbol=k),c});