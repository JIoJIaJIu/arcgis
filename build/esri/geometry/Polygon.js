//>>built
define("esri/geometry/Polygon","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../SpatialReference ./Geometry ./Point ./Extent ./mathUtils ../srUtils".split(" "),function(C,q,m,D,r,E,H,F,t,B,v,G){var w={type:"polygon",rings:null},l=C(F,{declaredClass:"esri.geometry.Polygon",constructor:function(a){m.mixin(this,w);this.rings=[];this._ring=0;a&&(m.isArray(a)?this.rings=m.isArray(a[0][0])?a:[a]:a.rings?m.mixin(this,a):this.spatialReference=a,this.spatialReference&&(this.spatialReference=
G.createSpatialReference(this.spatialReference)));this.verifySR()},addRing:function(a){return this.clearCache(),this._ring=this.rings.length,this.rings[this._ring]=[],m.isArray(a[0])?q.forEach(a,this._addPointArr,this):q.forEach(a,this._addPoint,this),this},_addPointArr:function(a){this.rings[this._ring].push(a)},_addPoint:function(a){this.rings[this._ring].push([a.x,a.y])},_insertPoints:function(a,b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);q.forEach(a,this._addPoint,
this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)?!1:null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0},getPoint:function(a,b){return this._validateInputs(a,b)?new t(this.rings[a][b],this.spatialReference):void 0},setPoint:function(a,b,c){return this._validateInputs(a,b)?(this.clearCache(),this.rings[a][b]=[c.x,c.y],this):void 0},insertPoint:function(a,b,c){return this._validateInputs(a)&&E.isDefined(b)&&0<=b&&b<=this.rings[a].length?(this.clearCache(),
this.rings[a].splice(b,0,[c.x,c.y]),this):void 0},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();var b=this.rings.splice(a,1)[0],c=b.length,d=this.spatialReference;for(a=0;c>a;a++)b[a]=new t(b[a],d);return b}},removePoint:function(a,b){return this._validateInputs(a,b)?(this.clearCache(),new t(this.rings[a].splice(b,1)[0],this.spatialReference)):void 0},getExtent:function(){var a,b=this.getCacheValue("_extent"),c=this.getCacheValue("_partwise");if(b)return a=new B(b),a._partwise=
c,a;var d=this.rings,g=d.length;if(g&&d[0].length){var f,h,e,k,p,u,n,l,x,y,m,q,r=k=d[0][0][0],t=p=d[0][0][1],v=Math.min,z=Math.max,A=this.spatialReference,w=[];for(u=0;g>u;u++){f=d[u];x=y=f[0]&&f[0][0];m=q=f[0]&&f[0][1];l=f.length;for(n=0;l>n;n++)h=f[n],e=h[0],h=h[1],r=v(r,e),t=v(t,h),k=z(k,e),p=z(p,h),x=v(x,e),m=v(m,h),y=z(y,e),q=z(q,h);w.push(new B({xmin:x,ymin:m,xmax:y,ymax:q,spatialReference:A?A.toJson():null}))}return b={xmin:r,ymin:t,xmax:k,ymax:p,spatialReference:A?A.toJson():null},c=1<w.length?
w:null,this.setCacheValue("_extent",b),this.setCacheValue("_partwise",c),a=new B(b),a._partwise=c,a}},contains:function(a){var b,c,d,g,f,h,e,k=this.rings,p=!1,u=k.length;c=this.spatialReference;d=a.spatialReference;var n=a.x;a=a.y;c&&d&&!c.equals(d)&&c._canProject(d)&&(b=c.isWebMercator()?t.lngLatToXY(n,a):t.xyToLngLat(n,a,!0),n=b[0],a=b[1]);for(e=0;u>e;e++)for(b=k[e],g=b.length,h=f=0;g>h;h++)f++,f===g&&(f=0),c=b[h],d=b[f],(c[1]<a&&d[1]>=a||d[1]<a&&c[1]>=a)&&c[0]+(a-c[1])/(d[1]-c[1])*(d[0]-c[0])<
n&&(p=!p);return p},getCentroid:function(){var a=this.getCacheValue("_centroid");if(void 0!==a)return a;var b,c,d,g,f,h,e=this.rings,k=[],p=1/0,u=-1/0,n=1/0,l=-1/0;(q.forEach(e,function(a){b=c=d=0;q.forEach(a,function(e,g){g<a.length-1&&(f=a[g+1],h=e[0]*f[1]-f[0]*e[1],b+=(e[0]+f[0])*h,c+=(e[1]+f[1])*h,d+=h,e[0]<p&&(p=e[0]),e[0]>u&&(u=e[0]),e[1]<n&&(n=e[1]),e[1]>l&&(l=e[1]))});0<d&&(d*=-1);d&&k.push([b,c,d/2])}),k.sort(function(a,b){return a[2]-b[2]}),b=c=void 0,k[0]&&(g=6*k[0][2],b=k[0][0]/g,c=k[0][1]/
g,(p>b||b>u||n>c||c>l)&&(b=c=void 0)),void 0===b||void 0===c)&&(g=e[0]&&e[0].length?this._getLineCentroid(e[0]):null)&&(b=g.x,c=g.y);return a=isNaN(b)||isNaN(c)?null:new t(b,c,this.spatialReference),this.setCacheValue("_centroid",a),a},_getLineCentroid:function(a){var b,c,d,g,f,h,e=0,k=0,p=0,l={x:0,y:0},n={x:0,y:0},m=a.length;for(g=0;m-1>g;g++)c=a[g],d=a[g+1],c&&d&&(l.x=c[0],l.y=c[1],n.x=d[0],n.y=d[1],b=v.getLength(l,n),0<b&&(e+=b,f=v.getMidpoint(c,d),k+=b*f[0],p+=b*f[1]));return 0<e?h={x:k/e,y:p/
e}:a[0]&&(h={x:a[0][0],y:a[0][1]}),h},isClockwise:function(a){var b,c=0,d=a.length,g=m.isArray(a[0])?function(a,b){return a[0]*b[1]-b[0]*a[1]}:function(a,b){return a.x*b.y-b.x*a.y};for(b=0;d>b;b++)c+=g(a[b],a[(b+1)%d]);return 0>=c/2},isSelfIntersecting:function(a){a=a||this;var b,c,d,g,f,h,e,k,l=a.rings.length;for(d=0;l>d;d++){for(b=0;b<a.rings[d].length-1;b++)for(f=[[a.rings[d][b][0],a.rings[d][b][1]],[a.rings[d][b+1][0],a.rings[d][b+1][1]]],c=d+1;l>c;c++)for(g=0;g<a.rings[c].length-1;g++)if(h=[[a.rings[c][g][0],
a.rings[c][g][1]],[a.rings[c][g+1][0],a.rings[c][g+1][1]]],e=v._getLineIntersection2(f,h),e&&!(e[0]===f[0][0]&&e[1]===f[0][1]||e[0]===h[0][0]&&e[1]===h[0][1]||e[0]===f[1][0]&&e[1]===f[1][1]||e[0]===h[1][0]&&e[1]===h[1][1]))return!0;if(k=a.rings[d].length,!(4>=k))for(b=0;k-3>b;b++)for(g=k-1,0===b&&(g=k-2),f=[[a.rings[d][b][0],a.rings[d][b][1]],[a.rings[d][b+1][0],a.rings[d][b+1][1]]],c=b+2;g>c;c++)if(h=[[a.rings[d][c][0],a.rings[d][c][1]],[a.rings[d][c+1][0],a.rings[d][c+1][1]]],e=v._getLineIntersection2(f,
h),e&&!(e[0]===f[0][0]&&e[1]===f[0][1]||e[0]===h[0][0]&&e[1]===h[0][1]||e[0]===f[1][0]&&e[1]===f[1][1]||e[0]===h[1][0]&&e[1]===h[1][1]))return!0}return!1},toJson:function(){var a={rings:m.clone(this.rings)},b=this.spatialReference;return b&&(a.spatialReference=b.toJson()),a}});return l.defaultProps=w,l.createEllipse=function(a){var b,c,d,g=a.center.x,f=a.center.y,h=a.longAxis,e=a.shortAxis,k=a.numberOfPoints,p=a.map,m=[],n=2*Math.PI/k;for(a=0;k>a;a++)b=Math.cos(a*n),c=Math.sin(a*n),b=p.toMap({x:h*
b+g,y:e*c+f}),m.push(b);return m.push(m[0]),d=new l(p.spatialReference),d.addRing(m),d},l.createCircle=function(a){return l.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})},l.fromExtent=function(a){var b=a.normalize();a=a.spatialReference;return new l({rings:q.map(b,function(a){return[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]}),spatialReference:a?a.toJson():null})},D("extend-esri")&&(m.setObject("geometry.Polygon",
l,r),r.geometry.defaultPolygon=w,r.geometry.createEllipse=l.createEllipse,r.geometry.createCircle=l.createCircle,r.geometry.isClockwise=l.prototype.isClockwise,r.geometry.polygonSelfIntersecting=l.prototype.isSelfIntersecting),l});