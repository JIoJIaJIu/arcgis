//>>built
define("esri/geometry/Circle","dojo/_base/declare dojo/_base/lang dojo/has ../kernel ../lang ./Point ./Polygon ./geodesicUtils ./webMercatorUtils ../WKIDUnitConversion ../units".split(" "),function(f,m,q,r,n,t,l,u,p,k,v){f=f(l,{declaredClass:"esri.geometry.Circle",_unitToMeters:{esriCentimeters:.01,esriDecimeters:.1,esriFeet:.3048,esriInches:.0254,esriKilometers:1E3,esriMeters:1,esriMiles:1609.34,esriMillimeters:.001,esriNauticalMiles:1852,esriYards:.9144,esriDecimalDegrees:111320},constructor:function(a,
c){var b;a.center?b=a:(b=c||{},b.center=a);this.center=m.isArray(b.center)?new t(b.center[0],b.center[1]):b.center;this.radius=b.radius||1E3;this.radiusUnit=b.radiusUnit||v.METERS;this.geodesic=!0===b.geodesic?!0:!1;this.numberOfPoints=b.numberOfPoints||60;this._init()},toJson:function(){return this.inherited(arguments)},_init:function(){this.rings=[];this._ring=0;var a;a=this.radius*this._unitToMeters[this.radiusUnit];var c=this._srType(this.center.spatialReference);if(this.geodesic){var b;switch(c){case "webMercator":b=
p.webMercatorToGeographic(this.center);break;case "projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case "geographic":b=this.center}a=this._createGeodesicCircle(b,a,this.numberOfPoints);"webMercator"===c&&(a=p.geographicToWebMercator(a))}else{var d;"webMercator"===c||"projected"===c?d=a/this._convert2Meters(1,this.center.spatialReference):"geographic"===c&&(d=a/this._unitToMeters.esriDecimalDegrees);a=
this._createPlanarCircle(this.center,d,this.numberOfPoints)}this.spatialReference=a.spatialReference;this.addRing(a.rings[0]);this.verifySR()},_createGeodesicCircle:function(a,c,b){for(var d,e=0,g=Math.PI/180,h=[];e<2*Math.PI;)d=u._directGeodeticSolver(a.y*g,a.x*g,e,c),h.push([d.x,d.y]),e+=Math.PI/(b/2);return h.push(h[0]),new l(h)},_createPlanarCircle:function(a,c,b){for(var d,e=0,g=[],h,f;e<2*Math.PI;)h=a.x+Math.cos(e)*c,f=a.y+Math.sin(e)*c,g.push([h,f]),e+=Math.PI/(b/2);return g.push(g[0]),d=new l(a.spatialReference),
d.addRing(g),d},_srType:function(a){return a.isWebMercator()?"webMercator":n.isDefined(k[a.wkid])||a.wkt&&0===a.wkt.indexOf("PROJCS")?"projected":"geographic"},_convert2Meters:function(a,c){var b;if(n.isDefined(k[c.wkid]))b=k.values[k[c.wkid]];else{b=c.wkt;var d=b.lastIndexOf(",")+1,e=b.lastIndexOf("]]");b=parseFloat(b.substring(d,e))}return a*b}});return q("extend-esri")&&m.setObject("geometry.Circle",f,r),f});