//>>built
define("esri/renderers/UniqueValueRenderer","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has ../kernel ../lang ../symbols/jsonUtils ./Renderer".split(" "),function(d,k,g,m,n,p,l,q){d=d(q,{declaredClass:"esri.renderer.UniqueValueRenderer",constructor:function(a,b,c,e,f){(this.values=[],this._symbols={},this.infos=[],a&&!a.declaredClass)?(b=a,this.defaultSymbol=(a=b.defaultSymbol)&&(a.declaredClass?a:l.fromJson(a)),this.attributeField=b.field1,this.attributeField2=b.field2,this.attributeField3=
b.field3,this.fieldDelimiter=b.fieldDelimiter,this.defaultLabel=b.defaultLabel,this.setValueExpression(b.valueExpression),b.backgroundFillSymbol&&(this.backgroundFillSymbol=l.fromJson(b.backgroundFillSymbol)),k.forEach(b.uniqueValueInfos,this._addValueInfo,this)):(this.defaultSymbol=a,this.attributeField=b,this.attributeField2=c,this.attributeField3=e,this.fieldDelimiter=f);this._multiple=!!this.attributeField2},addValue:function(a,b){var c=g.isObject(a)?a:{value:a,symbol:b};this._addValueInfo(c)},
removeValue:function(a){var b=k.indexOf(this.values,a);-1!==b&&(this.values.splice(b,1),delete this._symbols[a],this.infos.splice(b,1))},getUniqueValueInfo:function(a){var b,c,e,f,h=this.attributeField,d=a.attributes;return this._exprTree?f=this._executeExpr(this._exprTree,this._createExprContext(a)):this._multiple?(b=this.attributeField2,c=this.attributeField3,e=[],h&&e.push(d[h]),b&&e.push(d[b]),c&&e.push(d[c]),f=e.join(this.fieldDelimiter||"")):f=g.isFunction(h)?h(a):d[h],this._symbols[f]},setValueExpression:function(a){this.valueExpression=
a;this._exprTree=this._parseExpr(a,{vars:{$feature:"any"}})},getSymbol:function(a){return(a=this.getUniqueValueInfo(a))&&a.symbol||this.defaultSymbol},_addValueInfo:function(a){var b=a.value;this.values.push(b);this.infos.push(a);var c=a.symbol;c&&(c.declaredClass||(a.symbol=l.fromJson(c)));this._symbols[b]=a},toJson:function(){var a,b=p.fixJson,c={type:"uniqueValue",field1:this.attributeField,field2:this.attributeField2,field3:this.attributeField3,fieldDelimiter:this.fieldDelimiter,valueExpression:this.valueExpression,
defaultSymbol:this.defaultSymbol&&this.defaultSymbol.toJson(),defaultLabel:this.defaultLabel,uniqueValueInfos:k.map(this.infos||[],function(a){return a=g.mixin({},a),a.symbol=a.symbol&&a.symbol.toJson(),a.value+="",b(a)})};return this.backgroundFillSymbol&&(c.backgroundFillSymbol=this.backgroundFillSymbol.toJson()),a=g.mixin(this.inherited(arguments),c),b(a)}});return m("extend-esri")&&g.setObject("renderer.UniqueValueRenderer",d,n),d});