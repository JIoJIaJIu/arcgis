//>>built
define("esri/renderers/utils","dojo/_base/lang dojo/_base/array dojo/has dojo/date/locale ../kernel ../numberUtils ../Color dojo/i18n!../nls/jsapi dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(k,g,t,p,u,n,q,v,w){function x(a){return a&&g.map(a,function(b){return new q(b)})}var l={},y={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},r={millisecond:[{formatLength:"long",selector:"date"},{formatLength:"medium",selector:"time"}],second:[{formatLength:"long",selector:"date"},{formatLength:"medium",
selector:"time"}],minute:[{formatLength:"long",selector:"date"},{formatLength:"short",selector:"time"}],hour:[{formatLength:"long",selector:"date"},{formatLength:"short",selector:"time"}],day:[{formatLength:"long",selector:"date"}],month:[{formatLength:"long",selector:"date"}],year:[{selector:"year"}]};return k.mixin(l,{createColorStops:function(a){var b=a.values,e=a.colors,d=a.labelIndexes;return g.map(b,function(a,h){var f="";return 0===h?f="\x3c ":h===b.length-1&&(f="\x3e "),{value:a,color:e[h],
label:!d||-1<g.indexOf(d,h)?f+n.format(a):null}})},updateColorStops:function(a){var b,e=a.stops;a=a.changes;var d=[],c=g.map(e,function(a){return a.value});g.forEach(a,function(a){d.push(a.index);c[a.index]=a.value});b=n.round(c,{indexes:d});g.forEach(e,function(a,f){a.value=c[f];var d="";0===f?d="\x3c ":f===e.length-1&&(d="\x3e ");a.label=null!=a.label?d+n.format(b[f]):null})},createClassBreakLabel:function(a){var b=a.minValue,e=a.maxValue,d=a.isFirstBreak?"":"\x3e ";a="percent-of-total"===a.normalizationType?
"%":"";return b=null==b?"":n.format(b),e=null==e?"":n.format(e),d+b+a+" "+v.smartMapping.minToMax+" "+e+a},setLabelsForClassBreaks:function(a){var b=a.classBreaks,e=a.classificationMethod,d=a.normalizationType,c=[];b&&b.length&&("standard-deviation"===e?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):a.round?(c.push(b[0].minValue),g.forEach(b,function(a){c.push(a.maxValue)}),c=n.round(c),g.forEach(b,function(a,b){a.label=l.createClassBreakLabel({minValue:0===
b?c[0]:c[b],maxValue:c[b+1],isFirstBreak:0===b,normalizationType:d})})):g.forEach(b,function(a,b){a.label=l.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===b,normalizationType:d})}))},updateClassBreak:function(a){var b,e=a.classBreaks,d=a.normalizationType,c=a.change,h=c.index,c=c.value,f=-1,m=-1,g=e.length;return"standard-deviation"===a.classificationMethod?void console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):
(0===h?f=h:h===g?m=h-1:(m=h-1,f=h),-1<f&&g>f&&(b=e[f],b.minValue=c,b.label=l.createClassBreakLabel({minValue:b.minValue,maxValue:b.maxValue,isFirstBreak:0===f,normalizationType:d})),void(-1<m&&g>m&&(b=e[m],b.maxValue=c,b.label=l.createClassBreakLabel({minValue:b.minValue,maxValue:b.maxValue,isFirstBreak:0===m,normalizationType:d}))))},calculateDateFormatInterval:function(a){var b,e,d,c,h,f,m,k,l,n=a.length,p=1/0;a=g.map(a,function(a){return new Date(a)});for(b=0;n-1>b;b++){d=a[b];h=[];m=1/0;k="";
for(e=b+1;n>e;e++)c=a[e],c=d.getFullYear()!==c.getFullYear()&&"year"||d.getMonth()!==c.getMonth()&&"month"||d.getDate()!==c.getDate()&&"day"||d.getHours()!==c.getHours()&&"hour"||d.getMinutes()!==c.getMinutes()&&"minute"||d.getSeconds()!==c.getSeconds()&&"second"||"millisecond",f=y[c],m>f&&(m=f,k=c),h.push(c);p>m&&(p=m,l=k)}return l},createUniqueValueLabel:function(a){var b=a.value,e=a.fieldInfo,d=a.domain;a=a.dateFormatInterval;var c=String(b);if(d=d&&d.codedValues?d.getName(b):null)c=d;else if("number"==
typeof b)if(e&&"esriFieldTypeDate"===e.type){var h=new Date(b);if(a&&r[a])var f=g.map(r[a],function(a){return p.format(h,a)}).reverse(),c=1==f.length?f[0]:w["dateTimeFormat-medium"].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(a,b){return f[b]});else c=p.format(h)}else c=n.format(b);return c},cloneColorInfo:function(a){var b;return a&&(b=k.mixin({},a),b.colors=x(b.colors),b.stops=b.stops&&g.map(b.stops,function(a){return a=k.mixin({},a),a.color&&(a.color=new q(a.color)),a})),b},cloneOpacityInfo:function(a){var b;
a&&(b=k.mixin({},a),(a=b.opacityValues)&&(b.opacityValues=a.slice(0)),(a=b.stops)&&(b.stops=g.map(a,function(a){return k.mixin({},a)})),(a=b.legendOptions)&&(b.legendOptions=k.mixin({},a)));return b},cloneSizeInfo:function(a){var b;a&&(b=k.mixin({},a),b.stops&&(b.stops=g.map(b.stops,function(a){return k.mixin({},a)})),(a=b.minSize)&&"object"==typeof a&&(b.minSize=l.cloneSizeInfo(a)),(a=b.maxSize)&&"object"==typeof a&&(b.maxSize=l.cloneSizeInfo(a)),(a=b.legendOptions)&&(b.legendOptions=k.mixin({},
a),a=a.customValues,a&&(b.legendOptions.customValues=a.slice(0))));return b}}),t("extend-esri")&&k.setObject("renderer.utils",l,u),l});