//>>built
define("esri/renderers/TimeClassBreaksAger","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/has dojo/date ../kernel ../lang ../symbols/jsonUtils ../Color ./SymbolAger".split(" "),function(h,k,d,l,m,n,p,q,r,t){var c=h(t,{declaredClass:"esri.renderer.TimeClassBreaksAger",constructor:function(b,a){this.infos=b;this.timeUnits=a||"day";b.sort(function(a,b){return a.minAge<b.minAge?-1:a.minAge>b.minAge?1:0})},getAgedSymbol:function(b,a){var c=a.getLayer(),u=a.attributes,d=p.isDefined;b=q.fromJson(b.toJson());
var f=c._map.timeExtent.endTime;if(!f)return b;var g=m.difference(new Date(u[c._startTimeField]),f,this.timeUnits);return k.some(this.infos,function(a){if(g>=a.minAge&&g<=a.maxAge){var c=a.color,e=a.size;a=a.alpha;return c&&b.setColor(c),d(e)&&this._setSymbolSize(b,e),d(a)&&b.color&&(b.color.a=a),!0}},this),b},toJson:function(){var b,a,c,d={agerClassBreakInfos:[]};d.timeUnits=this._getRestUnits(this.timeUnits);for(b=0;b<this.infos.length;b+=1)a=this.infos[b],c={},c.oldestAge=1/0===a.maxAge?null:a.maxAge,
c.size=a.size,a.color&&(c.color=r.toJsonColor(a.color)),a.alpha&&(c.alpha=Math.round(255*a.alpha)),d.agerClassBreakInfos[b]=c;return d},_getRestUnits:function(b){var a="esriTimeUnitsDays";switch(b){case c.UNIT_SECONDS:a="esriTimeUnitsSeconds";break;case c.UNIT_MILLISECONDS:a="esriTimeUnitsMilliseconds";break;case c.UNIT_HOURS:a="esriTimeUnitsHours";break;case c.UNIT_MINUTES:a="esriTimeUnitsMinutes";break;case c.UNIT_MONTHS:a="esriTimeUnitsMonths";break;case c.UNIT_WEEKS:a="esriTimeUnitsWeeks";break;
case c.UNIT_YEARS:a="esriTimeUnitsYears"}return a}});return d.mixin(c,{UNIT_DAYS:"day",UNIT_HOURS:"hour",UNIT_MILLISECONDS:"millisecond",UNIT_MINUTES:"minute",UNIT_MONTHS:"month",UNIT_SECONDS:"second",UNIT_WEEKS:"week",UNIT_YEARS:"year"}),l("extend-esri")&&d.setObject("renderer.TimeClassBreaksAger",c,n),c});