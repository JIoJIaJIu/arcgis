//>>built
define("esri/PluginTarget","require dojo/aspect dojo/_base/array dojo/_base/lang dojo/Deferred dojo/when".split(" "),function(g,h,k,n,l,m){function c(){h.after(this.constructor._meta,"ctor",this._pluginsHandler,!0);this._plugins={}}return c.prototype={addPlugin:function(b,a){var f=this,d=this._plugins,e=new l;try{g([b],function(c){b in d?e.resolve({id:d[b].declaredId||b.replace(/\//g,".")}):(d[b]=c,m(c.add(f,a),function(){var a={id:c.declaredId||b.replace(/\//g,".")};f.emit("plugin-add",a);e.resolve(a)},
function(a){e.reject(a)}))})}catch(c){e.reject(c)}return e.promise},removePlugin:function(b){if(b in this._plugins){var a=this._plugins[b];a.remove(this);delete this._plugins[b];this.emit("plugin-remove",{id:a.declaredId||b.replace(/\//g,".")})}},_pluginsHandler:function(){var b=this;k.some(arguments,function(a){if(a&&a.plugins&&a.plugins instanceof Array){var c,d,e=a.plugins;for(d=0;d<e.length;d++)a=e[d],c=a instanceof Object?a.id:a,b.addPlugin(c,a.options);return!0}})}},c});