//>>built
define("esri/numberUtils",["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(t,u,v,w){var x=function(d,b){return d-b},f={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(d){var b=String(d),a=b.match(f._reNumber);d={integer:0,fractional:0};if(a&&a[1])d.integer=a[1].split("").length,d.fractional=a[3]?a[3].split("").length:0;else if(-1<b.toLowerCase().indexOf("e")){var c,e,a=b.split("e"),b=a[0],a=a[1];b&&a&&(b=Number(b),a=Number(a),e=0<a,e||(a=Math.abs(a)),c=f.getDigits(b),
e?(c.integer+=a,a>c.fractional?c.fractional=0:c.fractional-=a):(c.fractional+=a,a>c.integer?c.integer=1:c.integer-=a),d=c)}return d},getFixedNumbers:function(d,b){var a,c;return a=Number(d.toFixed(b)),d>a?c=a+1/Math.pow(10,b):(c=a,a-=1/Math.pow(10,b)),a=Number(a.toFixed(b)),c=Number(c.toFixed(b)),[a,c]},getPctChange:function(d,b,a,c){var e,f,g,h={prev:null,next:null};return null!=a&&(e=d-a,f=b-a,g=f-e,h.prev=Math.floor(Math.abs(100*g/e))),null!=c&&(e=c-d,f=c-b,g=f-e,h.next=Math.floor(Math.abs(100*
g/e))),h},round:function(d,b){var a,c,e,p,g,h,k,q,r,l,m=d.slice(0),t=b&&null!=b.tolerance?b.tolerance:2,n=b&&b.indexes,u=b&&null!=b.strictBounds?b.strictBounds:!1;if(n)n.sort(x);else for(n=[],k=0;k<m.length;k++)n.push(k);for(k=0;k<n.length;k++)if(l=n[k],a=m[l],c=0===l?null:m[l-1],e=l===m.length-1?null:m[l+1],p=f.getDigits(a),g=p.fractional){q=0;for(r=!1;g>=q&&!r;)h=f.getFixedNumbers(a,q),h=u&&0===k?h[1]:h[0],r=f.hasMinimalChange(a,h,c,e,t),q++;r&&(m[l]=h)}return m},hasMinimalChange:function(d,b,a,
c,e){var p,g;d=f.getPctChange(d,b,a,c);return p=null==d.prev||d.prev<=e,g=null==d.next||d.next<=e,p&&g||d.prev+d.next<=2*e},_reAllZeros:new RegExp("\\"+v.decimal+"0+$","g"),_reSomeZeros:RegExp("(\\d)0*$","g"),format:function(d,b){b=b||{places:20,round:-1};var a=u.format(d,b);return a&&(a=a.replace(f._reSomeZeros,"$1").replace(f._reAllZeros,"")),a}};return t("extend-esri")&&(w.numberUtils=f),f});